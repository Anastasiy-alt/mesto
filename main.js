(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var n,r;return n=t,(r=[{key:"_check",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"GET"}).then((function(e){return e.json()})).then((function(t){return e._check(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return console.log(e,"в setUserInfo, class"),fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._check(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.json()})).then((function(e){return t._check(e)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=r.title,this._link=r.link,this._cardSelector=n,this._handleCardClick=o}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._img=this._element.querySelector(".element__img"),this._imgName=this._element.querySelector(".element__name"),this._likeButton=this._element.querySelector(".element__like"),this._setEventListeners(),this._img.alt=this._title,this._img.src=this._link,this._imgName.textContent=this._title,fetch("https://mesto.nomoreparties.co/v1/cohort-46/cards",{method:"POST",headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f","Content-Type":"application/json"},body:JSON.stringify({name:this._title,link:this._link})}),this._element}},{key:"_handleClickLikeButton",value:function(){this._likeButton.classList.toggle("element__like_click")}},{key:"_handleClickDeleteButton",value:function(){this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._deleteButton=this._element.querySelector(".element__delete"),this._img.addEventListener("click",(function(){e._handleCardClick(e._title,e._link)})),this._deleteButton.addEventListener("click",(function(){e._handleClickDeleteButton()})),this._likeButton.addEventListener("click",(function(){e._handleClickLikeButton()}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._escClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._escClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._escClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close()}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},c.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submit=t,n._popupForm=n._popup.querySelector(".popup__form"),n._popupInput=n._popupForm.querySelectorAll(".popup__item"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupInput.forEach((function(t){e[t.name]=t.value})),e}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;c(p(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._submit(e._getInputValues())}))}},{key:"close",value:function(){c(p(u.prototype),"close",this).call(this),this._popupForm.reset()}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function g(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._imgLink=t._popup.querySelector(".popup__img"),t._imgName=t._popup.querySelector(".popup__info-img"),t}return t=u,(n=[{key:"open",value:function(e,t){this._imgLink.src=t,this._imgLink.alt=e,this._imgName.textContent=e,v(w(u.prototype),"open",this).call(this)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n=t.userName,r=t.userInfo,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userInfo=r,this._userAvatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._userName.textContent,e.info=this._userInfo.textContent,e.avatar=this._userAvatar.src,e}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userInfo.textContent=e.info,this._userAvatar.src=e.avatar}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"_showError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._form.inputErrorClass),n.textContent=t,n.classList.add(r._form.errorClass)})),j(this,"_hideError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._form.inputErrorClass),t.classList.remove(r._form.errorClass),t.textContent=" "})),j(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideError(e):r._showError(e,e.validationMessage)})),this._form=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(".popup__item")),this._buttonElement=this._formElement.querySelector(this._form.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"makeButtonDisabled",value:function(){this._buttonElement.classList.add(this._form.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?this.makeButtonDisabled():(this._buttonElement.classList.remove(this._form.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideError(t)}))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),P=document.querySelector(".profile__edit-button"),q=document.querySelector(".popup_for_edit"),I=document.querySelector(".popup_for_add"),B=document.querySelector("[name=name]"),x=document.querySelector("[name=info]"),T=document.querySelector(".profile__name"),R=document.querySelector(".profile__info"),A=document.querySelector(".profile__add-button"),D=document.querySelector(".elements"),U=document.querySelector(".popup_for_img"),N=document.querySelector(".profile__avatar"),V={},H=new t({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-46",headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f","Content-Type":"application/json"}}),M=new S({userName:T,userInfo:R,userAvatar:N}),G=new h(q,(function(e){H.setUserInfo(e).then((function(e){console.log(e,"в submitEdit, then"),M.setUserInfo(e),G.close()}))}));G.setEventListeners(),P.addEventListener("click",(function(){V["form-info"].resetValidation();var e=M.getUserInfo();x.value=e.info,B.value=e.name,G.open()}));var F=new E(U);F.setEventListeners();var J=function(e){return new r({data:e,handleCardClick:function(e,t){F.open(e,t)}},".img-template").generateCard()},z=new h(I,(function(e){Y.addItem(J(e)),z.close()}));z.setEventListeners(),A.addEventListener("click",(function(){V["form-add"].resetValidation(),z.open()}));var W,Y=new _({renderer:function(e){Y.addItem(J(e))}},D);Y.renderItems([{title:"Toshi в толстовке",link:"https://images.unsplash.com/photo-1534432586043-ead5b99229fb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1508&q=80"},{title:"Toshi в дождивике",link:"https://images.unsplash.com/photo-1530041686259-53d26f863313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2619&q=80"}]),W={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(W.formSelector)).forEach((function(e){var t=new L(W,e),n=e.getAttribute("name");V[n]=t,t.enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNkxBQXFCQSxFQUFBQSxXQUNqQixXQUFZQyxJLDRGQUFTLFNBQ2pCQyxLQUFLQyxTQUFXRixFQUFRRyxRQUN4QkYsS0FBS0csU0FBV0osRUFBUUssT0FDM0IsQywyQ0FDRCxTQUFPQyxHQUNILE9BQUlBLEVBQUlDLEdBQ0dELEVBQUlFLE9BR1JDLFFBQVFDLE9BQVIsa0JBQTBCSixFQUFJSyxRQUN4QyxHLHlCQXFCRCxXQUFjLFdBQ1YsT0FBT0MsTUFBTSxHQUFELE9BQUlYLEtBQUtDLFNBQVQsYUFBOEIsQ0FDdENHLFFBQVNKLEtBQUtHLFNBQ2RTLE9BQVEsUUFFUEMsTUFBSyxTQUFBUixHQUFHLE9BQUlBLEVBQUlFLE1BQVIsSUFDUk0sTUFBSyxTQUFBUixHQUFHLE9BQUksRUFBS1MsT0FBT1QsRUFBaEIsR0FDaEIsRyx5QkFFRCxTQUFZVSxHQUFVLFdBRWxCLE9BREFDLFFBQVFDLElBQUlGLEVBQVUsd0JBQ2ZKLE1BQU0sR0FBRCxPQUFJWCxLQUFLQyxTQUFULGFBQThCLENBQ3RDRyxRQUFTSixLQUFLRyxTQUNkUyxPQUFRLFFBQ1JNLEtBQU1DLEtBQUtDLFVBQVUsQ0FDakJDLEtBQU1OLEVBQVNNLEtBQ2ZDLE1BQU9QLEVBQVNPLFVBR25CVCxNQUFLLFNBQUFSLEdBQUcsT0FBSSxFQUFLUyxPQUFPVCxFQUFoQixHQUNoQixHLHFCQUVELFNBQVFrQixHQUFVLFdBQ2QsT0FBT1osTUFBTSxHQUFELE9BQUlYLEtBQUtDLFNBQVQsVUFBMkIsQ0FDbkNXLE9BQVEsT0FDUlIsUUFBU0osS0FBS0csU0FDZGUsS0FBTUMsS0FBS0MsVUFBVSxDQUNqQkMsS0FBTUUsRUFBU0YsS0FDZkcsS0FBTUQsRUFBU0MsU0FHbEJYLE1BQUssU0FBQVIsR0FBRyxPQUFJQSxFQUFJRSxNQUFSLElBQ1JNLE1BQUssU0FBQVIsR0FBRyxPQUFJLEVBQUtTLE9BQU9ULEVBQWhCLEdBQ2hCLE0sc0VBakVnQlAsRywwS0NBQTJCLEVBQUFBLFdBQ25CLGFBQXVDQyxHQUFjLElBQXZDQyxFQUF1QyxFQUF2Q0EsS0FBTUMsRUFBaUMsRUFBakNBLGlCLDRGQUFpQyxTQUNuRDVCLEtBQUs2QixPQUFTRixFQUFLRyxNQUNuQjlCLEtBQUsrQixNQUFRSixFQUFLSCxLQUNsQnhCLEtBQUtnQyxjQUFnQk4sRUFDckIxQixLQUFLaUMsaUJBQW1CTCxDQUN6QixDLGlEQUVELFdBT0UsT0FOb0JNLFNBQ2pCQyxjQUFjbkMsS0FBS2dDLGVBQ25CSSxRQUNBRCxjQUFjLFlBQ2RFLFdBQVUsRUFHZCxHLDBCQUVELFdBb0JFLE9BbkJBckMsS0FBS3NDLFNBQVd0QyxLQUFLdUMsZUFDckJ2QyxLQUFLd0MsS0FBT3hDLEtBQUtzQyxTQUFTSCxjQUFjLGlCQUN4Q25DLEtBQUt5QyxTQUFXekMsS0FBS3NDLFNBQVNILGNBQWMsa0JBQzVDbkMsS0FBSzBDLFlBQWMxQyxLQUFLc0MsU0FBU0gsY0FBYyxrQkFDL0NuQyxLQUFLMkMscUJBQ0wzQyxLQUFLd0MsS0FBS0ksSUFBTTVDLEtBQUs2QixPQUNyQjdCLEtBQUt3QyxLQUFLSyxJQUFNN0MsS0FBSytCLE1BQ3JCL0IsS0FBS3lDLFNBQVNLLFlBQWM5QyxLQUFLNkIsT0FDakNsQixNQUFNLG9EQUFxRCxDQUNuREMsT0FBUSxPQUNSUixRQUFTLENBQ0wyQyxjQUFlLHVDQUNmLGVBQWdCLG9CQUVwQjdCLEtBQU1DLEtBQUtDLFVBQVUsQ0FDakJDLEtBQU1yQixLQUFLNkIsT0FDWEwsS0FBTXhCLEtBQUsrQixVQUdoQi9CLEtBQUtzQyxRQUNiLEcsb0NBRUQsV0FDRXRDLEtBQUswQyxZQUFZTSxVQUFVQyxPQUFPLHNCQUNuQyxHLHNDQUVELFdBQ0VqRCxLQUFLc0MsU0FBU1ksUUFDZixHLGdDQUVELFdBQXFCLFdBQ25CbEQsS0FBS21ELGNBQWdCbkQsS0FBS3NDLFNBQVNILGNBQWMsb0JBQ2pEbkMsS0FBS3dDLEtBQUtZLGlCQUFpQixTQUFTLFdBQ2xDLEVBQUtuQixpQkFBaUIsRUFBS0osT0FBUSxFQUFLRSxNQUN6QyxJQUNEL0IsS0FBS21ELGNBQWNDLGlCQUFpQixTQUFTLFdBQzNDLEVBQUtDLDBCQUNOLElBQ0RyRCxLQUFLMEMsWUFBWVUsaUJBQWlCLFNBQVMsV0FDekMsRUFBS0Usd0JBQ04sR0FDRixNLHNFQTVEa0I3QixHLDBLQ0FBOEIsRUFBQUEsV0FDakIsV0FBWUMsSSw0RkFBTyxTQUNmeEQsS0FBS3lELE9BQVNELEVBQ2R4RCxLQUFLMEQsVUFBWTFELEtBQUsyRCxnQkFBZ0JDLEtBQUs1RCxLQUM5QyxDLHlDQUVELFdBQ0lBLEtBQUt5RCxPQUFPVCxVQUFVYSxJQUFJLGdCQUMxQjNCLFNBQVNrQixpQkFBaUIsVUFBV3BELEtBQUswRCxVQUM3QyxHLG1CQUVELFdBQ0kxRCxLQUFLeUQsT0FBT1QsVUFBVUUsT0FBTyxnQkFDN0JoQixTQUFTNEIsb0JBQW9CLFVBQVc5RCxLQUFLMEQsVUFDaEQsRyw2QkFFRCxTQUFnQkssR0FDSSxXQUFaQSxFQUFJQyxLQUNKaEUsS0FBS2lFLE9BRVosRywrQkFFRCxXQUFvQixXQUNDakUsS0FBS3lELE9BQU90QixjQUFjLGlCQUNsQ2lCLGlCQUFpQixTQUFTLFdBQy9CLEVBQUthLE9BQ1IsSUFDRGpFLEtBQUt5RCxPQUFPTCxpQkFBaUIsYUFBYSxTQUFDVyxHQUNuQ0EsRUFBSUcsT0FBT2xCLFVBQVVtQixTQUFTLGlCQUM5QixFQUFLRixPQUVaLEdBQ0osTSxzRUFoQ2dCVixHLHl3Q0NFQWEsRUFBQUEsU0FBQUEsSSw2ckJBQ2pCLFdBQVlDLEVBQWVDLEdBQVEsYSw0RkFBQSxVQUMvQixjQUFNRCxJQUNERSxRQUFVRCxFQUNmLEVBQUtFLFdBQWEsRUFBS2YsT0FBT3RCLGNBQWMsZ0JBQzVDLEVBQUtzQyxZQUFjLEVBQUtELFdBQVdFLGlCQUFpQixnQkFKckIsQ0FLbEMsQyw0Q0FFRCxXQUNJLElBQU1DLEVBQVksQ0FBQyxFQUluQixPQUhBM0UsS0FBS3lFLFlBQVlHLFNBQVEsU0FBQUMsR0FDckJGLEVBQVVFLEVBQU14RCxNQUFRd0QsRUFBTUMsS0FDakMsSUFDTUgsQ0FDVixHLDRCQUdILFNBQWVoRCxHQUNiM0IsS0FBSytFLFdBQVdILFNBQVEsU0FBQ0MsR0FFdkJBLEVBQU1DLE1BQVFuRCxFQUFLa0QsRUFBTXhELEtBQzFCLEdBQ0YsRywrQkFFQyxXQUFvQixXQUNoQixzREFDQXJCLEtBQUt3RSxXQUFXcEIsaUJBQWlCLFVBQVUsU0FBQzRCLEdBQ3hDQSxFQUFNQyxpQkFDTixFQUFLVixRQUFRLEVBQUtXLGtCQUNyQixHQUNKLEcsbUJBRUQsV0FDSSwwQ0FDQWxGLEtBQUt3RSxXQUFXVyxPQUNuQixNLHNFQW5DZ0JmLENBQXNCYixHLDBLQ0Z0QjZCLEVBQUFBLFdBQ2pCLGFBQXlCQyxHQUFXLElBQXZCQyxFQUF1QixFQUF2QkEsVSw0RkFBdUIsU0FFaEN0RixLQUFLdUYsVUFBWUQsRUFDakJ0RixLQUFLd0YsV0FBYUgsQ0FDckIsQyw0Q0FFRCxTQUFRSSxHQUNKekYsS0FBS3dGLFdBQVdFLFFBQVFELEVBQzNCLEcseUJBRUQsU0FBWUUsR0FBTyxXQUNmQSxFQUFNZixTQUFRLFNBQUFnQixHQUNWLEVBQUtMLFVBQVVLLEVBQ2xCLEdBQ0osTSxzRUFmZ0JSLEcseXdDQ0VBUyxFQUFBQSxTQUFBQSxJLDZyQkFDakIsV0FBWXhCLEdBQWUsYSw0RkFBQSxVQUN2QixjQUFNQSxJQUNEeUIsU0FBVyxFQUFLckMsT0FBT3RCLGNBQWMsZUFDMUMsRUFBS00sU0FBVyxFQUFLZ0IsT0FBT3RCLGNBQWMsb0JBSG5CLENBSTFCLEMsaUNBRUQsU0FBS2QsRUFBTUcsR0FDUHhCLEtBQUs4RixTQUFTakQsSUFBTXJCLEVBQ3BCeEIsS0FBSzhGLFNBQVNsRCxJQUFNdkIsRUFDcEJyQixLQUFLeUMsU0FBU0ssWUFBY3pCLEVBQzVCLHdDQUNILE0sc0VBWmdCd0UsQ0FBdUJ0QyxHLDBLQ0Z2QndDLEVBQUFBLFdBQ2pCLGNBQWdELElBQWxDQyxFQUFrQyxFQUFsQ0EsU0FBVUMsRUFBd0IsRUFBeEJBLFNBQVVDLEVBQWMsRUFBZEEsWSw0RkFBYyxTQUM1Q2xHLEtBQUttRyxVQUFZSCxFQUNqQmhHLEtBQUtvRyxVQUFZSCxFQUNqQmpHLEtBQUtxRyxZQUFjSCxDQUN0QixDLGdEQUVELFdBQ0ksSUFBTW5GLEVBQVcsQ0FBQyxFQUlsQixPQUhBQSxFQUFRLEtBQVdmLEtBQUttRyxVQUFVckQsWUFDbEMvQixFQUFRLEtBQVdmLEtBQUtvRyxVQUFVdEQsWUFDbEMvQixFQUFRLE9BQWFmLEtBQUtxRyxZQUFZeEQsSUFDL0I5QixDQUVWLEcseUJBRUQsU0FBWUEsR0FDUmYsS0FBS21HLFVBQVVyRCxZQUFjL0IsRUFBU00sS0FDdENyQixLQUFLb0csVUFBVXRELFlBQWMvQixFQUFTdUYsS0FDdEN0RyxLQUFLcUcsWUFBWXhELElBQU05QixFQUFTd0YsTUFDbkMsTSxzRUFwQmdCUixHLGtTQ0FBUyxFQUFBQSxXQUNqQixXQUFZQyxFQUFlQyxHQUFNLFksNEZBQUEsOEJBUXBCLFNBQUNDLEVBQWNDLEdBQ3hCLElBQU1DLEVBQWUsRUFBS0MsYUFBYTNFLGNBQWxCLFdBQW9Dd0UsRUFBYUksR0FBakQsV0FDckJKLEVBQWEzRCxVQUFVYSxJQUFJLEVBQUttRCxNQUFNQyxpQkFDdENKLEVBQWEvRCxZQUFjOEQsRUFDM0JDLEVBQWE3RCxVQUFVYSxJQUFJLEVBQUttRCxNQUFNRSxXQUN6QyxJQWJnQyxxQkFnQnBCLFNBQUNQLEdBQ1YsSUFBTUUsRUFBZSxFQUFLQyxhQUFhM0UsY0FBbEIsV0FBb0N3RSxFQUFhSSxHQUFqRCxXQUNyQkosRUFBYTNELFVBQVVFLE9BQU8sRUFBSzhELE1BQU1DLGlCQUN6Q0osRUFBYTdELFVBQVVFLE9BQU8sRUFBSzhELE1BQU1FLFlBQ3pDTCxFQUFhL0QsWUFBYyxHQUM5QixJQXJCZ0MsOEJBd0JYLFNBQUM2RCxHQUNkQSxFQUFhUSxTQUFTQyxNQUd2QixFQUFLQyxXQUFXVixHQUZoQixFQUFLVyxXQUFXWCxFQUFjQSxFQUFhWSxrQkFJbEQsSUE3Qkd2SCxLQUFLZ0gsTUFBUVAsRUFDYnpHLEtBQUs4RyxhQUFlSixFQUNwQjFHLEtBQUsrRSxXQUFheUMsTUFBTUMsS0FBS3pILEtBQUs4RyxhQUFhcEMsaUJBQWlCLGlCQUNoRTFFLEtBQUswSCxlQUFpQjFILEtBQUs4RyxhQUFhM0UsY0FBY25DLEtBQUtnSCxNQUFNVyxxQkFDcEUsQyx1REEyQkQsV0FBcUIsV0FDakIzSCxLQUFLNEgsb0JBQ0w1SCxLQUFLK0UsV0FBV0gsU0FBUSxTQUFDK0IsR0FDckJBLEVBQWF2RCxpQkFBaUIsU0FBUyxXQUNuQyxFQUFLeUUsb0JBQW9CbEIsR0FDekIsRUFBS2lCLG1CQUNSLEdBQ0osR0FDSixHLDhCQUVELFdBQ0k1SCxLQUFLMkMscUJBQ0wzQyxLQUFLOEcsYUFBYTFELGlCQUFpQixVQUFVLFNBQUNXLEdBQzFDQSxFQUFJa0IsZ0JBQ1AsR0FDSixHLDhCQUVELFdBQ0ksT0FBT2pGLEtBQUsrRSxXQUFXK0MsTUFBSyxTQUFDbkIsR0FDekIsT0FBUUEsRUFBYVEsU0FBU0MsS0FDakMsR0FDSixHLGdDQUdELFdBQ0lwSCxLQUFLMEgsZUFBZTFFLFVBQVVhLElBQUk3RCxLQUFLZ0gsTUFBTWUscUJBQzdDL0gsS0FBSzBILGVBQWVNLFVBQVcsQ0FDbEMsRywrQkFFRCxXQUNRaEksS0FBS2lJLG1CQUNMakksS0FBS2tJLHNCQUVMbEksS0FBSzBILGVBQWUxRSxVQUFVRSxPQUFPbEQsS0FBS2dILE1BQU1lLHFCQUNoRC9ILEtBQUswSCxlQUFlTSxVQUFXLEVBRXRDLEcsNkJBRUQsV0FBa0IsV0FDZGhJLEtBQUs0SCxvQkFDTDVILEtBQUsrRSxXQUFXSCxTQUFRLFNBQUMrQixHQUNyQixFQUFLVSxXQUFXVixFQUNuQixHQUNKLE0sc0VBNUVnQkgsR0NBUjJCLEVBQWlCakcsU0FBU0MsY0FBYyx5QkFDeENpRyxFQUFtQmxHLFNBQVNDLGNBQWMsbUJBQzFDa0csRUFBZW5HLFNBQVNDLGNBQWMsa0JBQ3RDbUcsRUFBWXBHLFNBQVNDLGNBQWMsZUFDbkNvRyxFQUFZckcsU0FBU0MsY0FBYyxlQUNuQ3FHLEVBQWN0RyxTQUFTQyxjQUFjLGtCQUNyQ3NHLEVBQWN2RyxTQUFTQyxjQUFjLGtCQUNyQ3VHLEVBQWN4RyxTQUFTQyxjQUFjLHdCQUNyQ3dHLEVBQWF6RyxTQUFTQyxjQUFjLGFBQ3BDeUcsRUFBYTFHLFNBQVNDLGNBQWMsa0JBQ3BDMEcsRUFBZ0IzRyxTQUFTQyxjQUFjLG9CQVV2QzJHLEVBQWlCLENBQUMsRUNKekJDLEVBQU0sSUFBSWpKLEVBQUksQ0FDbEJJLFFBQVMsOENBQ1RFLFFBQVMsQ0FDUDJDLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBSWRrRCxFQUFXLElBQUlGLEVBQVMsQ0FDNUJDLFNBQVV3QyxFQUNWdkMsU0FBVXdDLEVBQ1Z2QyxXQUFZMkMsSUFhUkcsRUFBaUIsSUFBSTVFLEVBQWNnRSxHQVZ0QixTQUFDYSxHQUNsQkYsRUFBSUcsWUFBWUQsR0FDZnBJLE1BQUssU0FBQ29JLEdBQ0xqSSxRQUFRQyxJQUFJZ0ksRUFBYyxzQkFDeEJoRCxFQUFTaUQsWUFBWUQsR0FDckJELEVBQWUvRSxPQUNoQixHQUVKLElBR0QrRSxFQUFlRyxvQkFFZmhCLEVBQWUvRSxpQkFBaUIsU0FBUyxXQUN2QzBGLEVBQWUsYUFBZkEsa0JBQ0EsSUFBTS9ILEVBQVdrRixFQUFTbUQsY0FDMUJiLEVBQVV6RCxNQUFRL0QsRUFBU3VGLEtBQzNCZ0MsRUFBVXhELE1BQVEvRCxFQUFTTSxLQUMzQjJILEVBQWVLLE1BQ2hCLElBRUQsSUFBTUMsRUFBVSxJQUFJekQsRUFBZStDLEdBQ25DVSxFQUFRSCxvQkFFUixJQUFNSSxFQUFhLFNBQUM1SCxHQVNsQixPQVJhLElBQUlGLEVBQ2YsQ0FDRUUsS0FBTUEsRUFDTkMsZ0JBQWlCLFNBQUNQLEVBQU1HLEdBQ3RCOEgsRUFBUUQsS0FBS2hJLEVBQU1HLEVBQ3BCLEdBQ0EsaUJBQ29CZ0ksY0FFMUIsRUFPS0MsRUFBcUIsSUFBSXJGLEVBQWNpRSxHQUwzQixTQUFDcUIsR0FDakJDLEVBQVVDLFFBQVFMLEVBQVdHLElBQzdCRCxFQUFtQnhGLE9BQ3BCLElBR0R3RixFQUFtQk4sb0JBRW5CVCxFQUFZdEYsaUJBQWlCLFNBQVMsV0FDcEMwRixFQUFlLFlBQWZBLGtCQUNBVyxFQUFtQkosTUFDcEIsSUFFRCxJQVMwQlEsRUFUcEJGLEVBQVksSUFBSXZFLEVBQVEsQ0FDNUJFLFNBQVUsU0FBQ00sR0FDVCtELEVBQVVDLFFBQVFMLEVBQVczRCxHQUM5QixHQUNBK0MsR0FFSGdCLEVBQVVHLFlDckZhLENBQ25CLENBQ0VoSSxNQUFPLG9CQUNQTixLQUFNLGtLQUVSLENBQ0VNLE1BQU8sb0JBQ1BOLEtBQU0sb0tEaUZjcUksRUQ1RUssQ0FDN0JFLGFBQWMsZUFDZEMsY0FBZSxnQkFDZnJDLHFCQUFzQixpQkFDdEJJLG9CQUFxQiw4QkFDckJkLGdCQUFpQiwwQkFDakJDLFdBQVksNkJDdUVLTSxNQUFNQyxLQUFLdkYsU0FBU3dDLGlCQUFpQm1GLEVBQWdCRSxlQUM3RG5GLFNBQVEsU0FBQ3FGLEdBQ2hCLElBQU1DLEVBQVksSUFBSTFELEVBQWNxRCxFQUFpQkksR0FFL0NFLEVBQVdGLEVBQVlHLGFBQWEsUUFFMUN0QixFQUFlcUIsR0FBWUQsRUFDM0JBLEVBQVVHLGtCQUNYLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NhcmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICAgIH1cbiAgICBfY2hlY2socmVzKSB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cbiAgICAvLyBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgLy8gICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAvLyAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgLy8gICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgLy8gICAgIH0pXG4gICAgLy8gICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2socmVzKSlcbiAgICAvLyAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAvLyAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIC8vICAgICAgICAgICAgICAgICBjb25zdCBjYXJkT2JqID0ge307XG4gICAgLy8gICAgICAgICAgICAgICAgIGNhcmRPYmoudGl0bGUgPSBpdGVtLm5hbWU7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNhcmRPYmoubGluayA9IGl0ZW0ubGluaztcbiAgICAvLyAgICAgICAgICAgICAgICAgaW5pdGlhbENhcmRzLnB1c2goY2FyZE9iaik7XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gaW5pdGlhbENhcmRzO1xuICAgIC8vICAgICAgICAgfSlcbiAgICAvLyB9XG5cbiAgICAvLyBzZXRJbml0aWFsQ2FyZHMoKSB7XG5cbiAgICAvLyB9XG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVjayhyZXMpKVxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXJEYXRhLCAn0LIgc2V0VXNlckluZm8sIGNsYXNzJyk7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBhYm91dDogdXNlckRhdGEuYWJvdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2socmVzKSkgIFxuICAgIH1cblxuICAgIGFkZENhcmQoY2FyZERhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGNhcmREYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgbGluazogY2FyZERhdGEubGlua1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrKHJlcykpO1xuICAgIH1cblxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5faW1nID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1nJyk7XG4gICAgdGhpcy5faW1nTmFtZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX25hbWUnKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5faW1nLmFsdCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX2ltZy5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2ltZ05hbWUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgICBmZXRjaCgnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00Ni9jYXJkcycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICc0YWI1NTVlMS0zOWEwLTQ4ZTYtODU5My02ZThhNGE4NGUyOGYnLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5fdGl0bGUsXG4gICAgICAgICAgICAgICAgbGluazogdGhpcy5fbGlua1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfaGFuZGxlQ2xpY2tMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9jbGljaycpO1xuICB9XG5cbiAgX2hhbmRsZUNsaWNrRGVsZXRlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlJyk7XG4gICAgdGhpcy5faW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX3RpdGxlLCB0aGlzLl9saW5rKVxuICAgIH0pO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNsaWNrRGVsZXRlQnV0dG9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNsaWNrTGlrZUJ1dHRvbigpO1xuICAgIH0pO1xuICB9O1xufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcbiAgICAgICAgdGhpcy5fZXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2VzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpO1xuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9zdWJtaXQgPSBzdWJtaXQ7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgICAgICB0aGlzLl9wb3B1cElucHV0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgaW5wdXREYXRhID0ge307XG4gICAgICAgIHRoaXMuX3BvcHVwSW5wdXQuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICBpbnB1dERhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpbnB1dERhdGE7XG4gICAgfVxuXG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAvLyDRgtGD0YIg0LLRgdGC0LDQstC70Y/QtdC8INCyIGB2YWx1ZWAg0LjQvdC/0YPRgtCwINC00LDQvdC90YvQtSDQuNC3INC+0LHRitC10LrRgtCwINC/0L4g0LDRgtGA0LjQsdGD0YLRgyBgbmFtZWAg0Y3RgtC+0LPQviDQuNC90L/Rg9GC0LBcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioe3JlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xuICAgICAgICAvLyB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWdMaW5rID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbiAgICAgICAgdGhpcy5faW1nTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5mby1pbWcnKTtcbiAgICB9XG5cbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICAgICAgdGhpcy5faW1nTGluay5zcmMgPSBsaW5rO1xuICAgICAgICB0aGlzLl9pbWdMaW5rLmFsdCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX2ltZ05hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCB1c2VySW5mbywgdXNlckF2YXRhciB9KSB7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvID0gdXNlckluZm87XG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIgPSB1c2VyQXZhdGFyO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHt9O1xuICAgICAgICB1c2VyRGF0YVsnbmFtZSddID0gdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQ7XG4gICAgICAgIHVzZXJEYXRhWydpbmZvJ10gPSB0aGlzLl91c2VySW5mby50ZXh0Q29udGVudDtcbiAgICAgICAgdXNlckRhdGFbJ2F2YXRhciddID0gdGhpcy5fdXNlckF2YXRhci5zcmM7XG4gICAgICAgIHJldHVybiB1c2VyRGF0YTtcblxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8udGV4dENvbnRlbnQgPSB1c2VyRGF0YS5pbmZvO1xuICAgICAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcbiAgICB9XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihmb3JtQ2xhc3NMaXN0LCBmb3JtKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtQ2xhc3NMaXN0O1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm07XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pdGVtJykpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB9O1xuXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC00L7QsdCw0LLQu9GP0LXRgiDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5XG4gICAgX3Nob3dFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Zvcm0uaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtLmVycm9yQ2xhc3MpO1xuICAgIH07XG5cbiAgICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0YPQtNCw0LvRj9C10YIg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuVxuICAgIF9oaWRlRXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybS5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtLmVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgICB9O1xuXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC/0YDQvtCy0LXRgNGP0LXRgiDQstCw0LvQuNC00L3QvtGB0YLRjCDQv9C+0LvRj1xuICAgIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgIH07XG5cbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvL9GE0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQtNC10LvQsNC10YIg0LrQvdC+0L/QutGDINC90LXQsNC60YLQuNCy0L3QvtC5IFxuICAgIG1ha2VCdXR0b25EaXNhYmxlZCgpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Zvcm0uaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlXG4gICAgfTtcblxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFrZUJ1dHRvbkRpc2FibGVkKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59IiwiZXhwb3J0IGNvbnN0IGVkaXRCdG5Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9mb3JfZWRpdCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9mb3JfYWRkJyk7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9bmFtZV0nKTtcbmV4cG9ydCBjb25zdCBpbmZvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1pbmZvXScpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbmZvJyk7XG5leHBvcnQgY29uc3QgYWRkQnRuSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGJsb2NrQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKTtcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2Zvcl9pbWcnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xuXG5leHBvcnQgY29uc3QgcG9wdXBWYWxpZGF0aW9uID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl90eXBlX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZSdcbn07XG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTsiLCJpbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IHsgaW5pdGlhbCB9IGZyb20gXCIuLi91dGlscy9jYXJkcy5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7XG4gIGVkaXRCdG5Qcm9maWxlLCBwb3B1cEVkaXRQcm9maWxlLCBwb3B1cEFkZENhcmQsIG5hbWVJbnB1dCxcbiAgaW5mb0lucHV0LCBwcm9maWxlTmFtZSwgcHJvZmlsZUluZm8sIGFkZEJ0bkltYWdlLFxuICBibG9ja0NhcmRzLCBpbWFnZVBvcHVwLCBwb3B1cFZhbGlkYXRpb24sXG4gIGZvcm1WYWxpZGF0b3JzLCBwcm9maWxlQXZhdGFyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ2JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc0YWI1NTVlMS0zOWEwLTQ4ZTYtODU5My02ZThhNGE4NGUyOGYnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IHByb2ZpbGVOYW1lLFxuICB1c2VySW5mbzogcHJvZmlsZUluZm8sXG4gIHVzZXJBdmF0YXI6IHByb2ZpbGVBdmF0YXJcbn0pO1xuXG5jb25zdCBzdWJtaXRFZGl0ID0gKGRhdGFFZGl0Rm9ybSkgPT4ge1xuICBhcGkuc2V0VXNlckluZm8oZGF0YUVkaXRGb3JtKVxuICAudGhlbigoZGF0YUVkaXRGb3JtKSA9PiB7XG4gICAgY29uc29sZS5sb2coZGF0YUVkaXRGb3JtLCAn0LIgc3VibWl0RWRpdCwgdGhlbicpO1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YUVkaXRGb3JtKTtcbiAgICAgIGhhbmRsZUVkaXRGb3JtLmNsb3NlKCk7XG4gICAgfVxuICApXG59XG5cbmNvbnN0IGhhbmRsZUVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBFZGl0UHJvZmlsZSwgc3VibWl0RWRpdCk7XG5oYW5kbGVFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5lZGl0QnRuUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbJ2Zvcm0taW5mbyddLnJlc2V0VmFsaWRhdGlvbigpO1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcbiAgaW5mb0lucHV0LnZhbHVlID0gdXNlckRhdGEuaW5mbztcbiAgbmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcbiAgaGFuZGxlRWRpdEZvcm0ub3BlbigpO1xufSk7XG5cbmNvbnN0IHpvb21JbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VQb3B1cCk7XG56b29tSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcbiAgICAgICAgem9vbUltZy5vcGVuKG5hbWUsIGxpbmspO1xuICAgICAgfVxuICAgIH0sICcuaW1nLXRlbXBsYXRlJyk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufTtcblxuY29uc3Qgc3VibWl0QWRkID0gKGRhdGFBZGRGb3JtKSA9PiB7XG4gINGBYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGFBZGRGb3JtKSk7XG4gIGhhbmRsZUFkZENhcmRQb3B1cC5jbG9zZSgpO1xufTtcblxuY29uc3QgaGFuZGxlQWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGRDYXJkLCBzdWJtaXRBZGQpO1xuaGFuZGxlQWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZEJ0bkltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1snZm9ybS1hZGQnXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgaGFuZGxlQWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pXG5cbmNvbnN0INGBYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgINGBYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgfVxufSwgYmxvY2tDYXJkcyk7XG5cbtGBYXJkc0xpc3QucmVuZGVySXRlbXMoaW5pdGlhbCk7XG5cbi8vINCS0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAocG9wdXBWYWxpZGF0aW9uKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBvcHVwVmFsaWRhdGlvbi5mb3JtU2VsZWN0b3IpKVxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHBvcHVwVmFsaWRhdGlvbiwgZm9ybUVsZW1lbnQpXG4gICAgLy8g0L/QvtC70YPRh9Cw0LXQvCDQtNCw0L3QvdGL0LUg0LjQtyDQsNGC0YDQuNCx0YPRgtCwIGBuYW1lYCDRgyDRhNC+0YDQvNGLXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKVxuICAgIC8vINCy0L7RgiDRgtGD0YIg0LIg0L7QsdGK0LXQutGCINC30LDQv9C40YHRi9Cy0LDQtdC8INC/0L7QtCDQuNC80LXQvdC10Lwg0YTQvtGA0LzRi1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24ocG9wdXBWYWxpZGF0aW9uKTsiLCJleHBvcnQgY29uc3QgaW5pdGlhbCA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogJ1Rvc2hpINCyINGC0L7Qu9GB0YLQvtCy0LrQtScsXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MzQ0MzI1ODYwNDMtZWFkNWI5OTIyOWZiP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNTA4JnE9ODAnXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogJ1Rvc2hpINCyINC00L7QttC00LjQstC40LrQtScsXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MzAwNDE2ODYyNTktNTNkMjZmODYzMzEzP2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0yNjE5JnE9ODAnXG4gICAgfVxuICBdO1xuIl0sIm5hbWVzIjpbIkFwaSIsIm9wdGlvbnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9jaGVjayIsInVzZXJEYXRhIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImFib3V0IiwiY2FyZERhdGEiLCJsaW5rIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJfdGl0bGUiLCJ0aXRsZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfaW1nIiwiX2ltZ05hbWUiLCJfbGlrZUJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsImFsdCIsInNyYyIsInRleHRDb250ZW50IiwiYXV0aG9yaXphdGlvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsIl9kZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUNsaWNrRGVsZXRlQnV0dG9uIiwiX2hhbmRsZUNsaWNrTGlrZUJ1dHRvbiIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfZXNjQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXBTZWxlY3RvciIsInN1Ym1pdCIsIl9zdWJtaXQiLCJfcG9wdXBGb3JtIiwiX3BvcHVwSW5wdXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXREYXRhIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJfaW5wdXRMaXN0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaXRlbXMiLCJpdGVtIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1nTGluayIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySW5mbyIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckluZm8iLCJfdXNlckF2YXRhciIsImluZm8iLCJhdmF0YXIiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUNsYXNzTGlzdCIsImZvcm0iLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsIl9mb3JtIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiQXJyYXkiLCJmcm9tIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNvbWUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfaGFzSW52YWxpZElucHV0IiwibWFrZUJ1dHRvbkRpc2FibGVkIiwiZWRpdEJ0blByb2ZpbGUiLCJwb3B1cEVkaXRQcm9maWxlIiwicG9wdXBBZGRDYXJkIiwibmFtZUlucHV0IiwiaW5mb0lucHV0IiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSW5mbyIsImFkZEJ0bkltYWdlIiwiYmxvY2tDYXJkcyIsImltYWdlUG9wdXAiLCJwcm9maWxlQXZhdGFyIiwiZm9ybVZhbGlkYXRvcnMiLCJhcGkiLCJoYW5kbGVFZGl0Rm9ybSIsImRhdGFFZGl0Rm9ybSIsInNldFVzZXJJbmZvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRVc2VySW5mbyIsIm9wZW4iLCJ6b29tSW1nIiwiY3JlYXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImhhbmRsZUFkZENhcmRQb3B1cCIsImRhdGFBZGRGb3JtIiwi0YFhcmRzTGlzdCIsImFkZEl0ZW0iLCJwb3B1cFZhbGlkYXRpb24iLCJyZW5kZXJJdGVtcyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=