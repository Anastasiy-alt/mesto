(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var n,r;return n=t,(r=[{key:"_check",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"GET"}).then((function(e){return e.json()})).then((function(t){return e._check(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return console.log(e,"в setUserInfo, class"),fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.info})}).then((function(e){return t._check(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.json()})).then((function(e){return t._check(e)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=r.title,this._link=r.link,this._cardSelector=n,this._handleCardClick=o}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._img=this._element.querySelector(".element__img"),this._imgName=this._element.querySelector(".element__name"),this._likeButton=this._element.querySelector(".element__like"),this._setEventListeners(),this._img.alt=this._title,this._img.src=this._link,this._imgName.textContent=this._title,fetch("https://mesto.nomoreparties.co/v1/cohort-46/cards",{method:"POST",headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f","Content-Type":"application/json"},body:JSON.stringify({name:this._title,link:this._link})}),this._element}},{key:"_handleClickLikeButton",value:function(){this._likeButton.classList.toggle("element__like_click")}},{key:"_handleClickDeleteButton",value:function(){this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._deleteButton=this._element.querySelector(".element__delete"),this._img.addEventListener("click",(function(){e._handleCardClick(e._title,e._link)})),this._deleteButton.addEventListener("click",(function(){e._handleClickDeleteButton()})),this._likeButton.addEventListener("click",(function(){e._handleClickLikeButton()}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._escClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._escClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._escClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close()}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},c.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submit=t,n._popupForm=n._popup.querySelector(".popup__form"),n._popupInput=n._popupForm.querySelectorAll(".popup__item"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupInput.forEach((function(t){e[t.name]=t.value})),e}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;c(p(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._submit(e._getInputValues())}))}},{key:"close",value:function(){c(p(u.prototype),"close",this).call(this),this._popupForm.reset()}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function g(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._imgLink=t._popup.querySelector(".popup__img"),t._imgName=t._popup.querySelector(".popup__info-img"),t}return t=u,(n=[{key:"open",value:function(e,t){this._imgLink.src=t,this._imgLink.alt=e,this._imgName.textContent=e,v(w(u.prototype),"open",this).call(this)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n=t.userName,r=t.userInfo,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userInfo=r,this._userAvatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._userName.textContent,e.info=this._userInfo.textContent,e.avatar=this._userAvatar.src,e}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userInfo.textContent=e.info,this._userAvatar.src=e.avatar}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"_showError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._form.inputErrorClass),n.textContent=t,n.classList.add(r._form.errorClass)})),j(this,"_hideError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._form.inputErrorClass),t.classList.remove(r._form.errorClass),t.textContent=" "})),j(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideError(e):r._showError(e,e.validationMessage)})),this._form=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(".popup__item")),this._buttonElement=this._formElement.querySelector(this._form.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"makeButtonDisabled",value:function(){this._buttonElement.classList.add(this._form.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?this.makeButtonDisabled():(this._buttonElement.classList.remove(this._form.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideError(t)}))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),P=document.querySelector(".profile__edit-button"),q=document.querySelector(".popup_for_edit"),I=document.querySelector(".popup_for_add"),B=document.querySelector("[name=name]"),x=document.querySelector("[name=info]"),T=document.querySelector(".profile__name"),R=document.querySelector(".profile__info"),A=document.querySelector(".profile__add-button"),D=document.querySelector(".elements"),U=document.querySelector(".popup_for_img"),N=document.querySelector(".profile__avatar"),V={},H=new t({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-46",headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f","Content-Type":"application/json"}}),M=new S({userName:T,userInfo:R,userAvatar:N}),G=new h(q,(function(e){console.log(e,"в submitEdit, в начале"),H.setUserInfo(e).then((function(e){console.log(e,"в submitEdit, then"),M.setUserInfo(e),G.close()}))}));G.setEventListeners(),P.addEventListener("click",(function(){V["form-info"].resetValidation();var e=M.getUserInfo();x.value=e.info,B.value=e.name,G.open()}));var F=new E(U);F.setEventListeners();var J=function(e){return new r({data:e,handleCardClick:function(e,t){F.open(e,t)}},".img-template").generateCard()},z=new h(I,(function(e){Y.addItem(J(e)),z.close()}));z.setEventListeners(),A.addEventListener("click",(function(){V["form-add"].resetValidation(),z.open()}));var W,Y=new _({renderer:function(e){Y.addItem(J(e))}},D);Y.renderItems([{title:"Toshi в толстовке",link:"https://images.unsplash.com/photo-1534432586043-ead5b99229fb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1508&q=80"},{title:"Toshi в дождивике",link:"https://images.unsplash.com/photo-1530041686259-53d26f863313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2619&q=80"}]),W={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(W.formSelector)).forEach((function(e){var t=new L(W,e),n=e.getAttribute("name");V[n]=t,t.enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNkxBQXFCQSxFQUFBQSxXQUNqQixXQUFZQyxJLDRGQUFTLFNBQ2pCQyxLQUFLQyxTQUFXRixFQUFRRyxRQUN4QkYsS0FBS0csU0FBV0osRUFBUUssT0FDM0IsQywyQ0FDRCxTQUFPQyxHQUNILE9BQUlBLEVBQUlDLEdBQ0dELEVBQUlFLE9BR1JDLFFBQVFDLE9BQVIsa0JBQTBCSixFQUFJSyxRQUN4QyxHLHlCQXFCRCxXQUFjLFdBQ1YsT0FBT0MsTUFBTSxHQUFELE9BQUlYLEtBQUtDLFNBQVQsYUFBOEIsQ0FDdENHLFFBQVNKLEtBQUtHLFNBQ2RTLE9BQVEsUUFFUEMsTUFBSyxTQUFBUixHQUFHLE9BQUlBLEVBQUlFLE1BQVIsSUFDUk0sTUFBSyxTQUFBUixHQUFHLE9BQUksRUFBS1MsT0FBT1QsRUFBaEIsR0FDaEIsRyx5QkFFRCxTQUFZVSxHQUFVLFdBRWxCLE9BREFDLFFBQVFDLElBQUlGLEVBQVUsd0JBQ2ZKLE1BQU0sR0FBRCxPQUFJWCxLQUFLQyxTQUFULGFBQThCLENBQ3RDRyxRQUFTSixLQUFLRyxTQUNkUyxPQUFRLFFBQ1JNLEtBQU1DLEtBQUtDLFVBQVUsQ0FDakJDLEtBQU1OLEVBQVNNLEtBQ2ZDLE1BQU9QLEVBQVNRLFNBR25CVixNQUFLLFNBQUFSLEdBQUcsT0FBSSxFQUFLUyxPQUFPVCxFQUFoQixHQUNoQixHLHFCQUVELFNBQVFtQixHQUFVLFdBQ2QsT0FBT2IsTUFBTSxHQUFELE9BQUlYLEtBQUtDLFNBQVQsVUFBMkIsQ0FDbkNXLE9BQVEsT0FDUlIsUUFBU0osS0FBS0csU0FDZGUsS0FBTUMsS0FBS0MsVUFBVSxDQUNqQkMsS0FBTUcsRUFBU0gsS0FDZkksS0FBTUQsRUFBU0MsU0FHbEJaLE1BQUssU0FBQVIsR0FBRyxPQUFJQSxFQUFJRSxNQUFSLElBQ1JNLE1BQUssU0FBQVIsR0FBRyxPQUFJLEVBQUtTLE9BQU9ULEVBQWhCLEdBQ2hCLE0sc0VBakVnQlAsRywwS0NBQTRCLEVBQUFBLFdBQ25CLGFBQXVDQyxHQUFjLElBQXZDQyxFQUF1QyxFQUF2Q0EsS0FBTUMsRUFBaUMsRUFBakNBLGlCLDRGQUFpQyxTQUNuRDdCLEtBQUs4QixPQUFTRixFQUFLRyxNQUNuQi9CLEtBQUtnQyxNQUFRSixFQUFLSCxLQUNsQnpCLEtBQUtpQyxjQUFnQk4sRUFDckIzQixLQUFLa0MsaUJBQW1CTCxDQUN6QixDLGlEQUVELFdBT0UsT0FOb0JNLFNBQ2pCQyxjQUFjcEMsS0FBS2lDLGVBQ25CSSxRQUNBRCxjQUFjLFlBQ2RFLFdBQVUsRUFHZCxHLDBCQUVELFdBb0JFLE9BbkJBdEMsS0FBS3VDLFNBQVd2QyxLQUFLd0MsZUFDckJ4QyxLQUFLeUMsS0FBT3pDLEtBQUt1QyxTQUFTSCxjQUFjLGlCQUN4Q3BDLEtBQUswQyxTQUFXMUMsS0FBS3VDLFNBQVNILGNBQWMsa0JBQzVDcEMsS0FBSzJDLFlBQWMzQyxLQUFLdUMsU0FBU0gsY0FBYyxrQkFDL0NwQyxLQUFLNEMscUJBQ0w1QyxLQUFLeUMsS0FBS0ksSUFBTTdDLEtBQUs4QixPQUNyQjlCLEtBQUt5QyxLQUFLSyxJQUFNOUMsS0FBS2dDLE1BQ3JCaEMsS0FBSzBDLFNBQVNLLFlBQWMvQyxLQUFLOEIsT0FDakNuQixNQUFNLG9EQUFxRCxDQUNuREMsT0FBUSxPQUNSUixRQUFTLENBQ0w0QyxjQUFlLHVDQUNmLGVBQWdCLG9CQUVwQjlCLEtBQU1DLEtBQUtDLFVBQVUsQ0FDakJDLEtBQU1yQixLQUFLOEIsT0FDWEwsS0FBTXpCLEtBQUtnQyxVQUdoQmhDLEtBQUt1QyxRQUNiLEcsb0NBRUQsV0FDRXZDLEtBQUsyQyxZQUFZTSxVQUFVQyxPQUFPLHNCQUNuQyxHLHNDQUVELFdBQ0VsRCxLQUFLdUMsU0FBU1ksUUFDZixHLGdDQUVELFdBQXFCLFdBQ25CbkQsS0FBS29ELGNBQWdCcEQsS0FBS3VDLFNBQVNILGNBQWMsb0JBQ2pEcEMsS0FBS3lDLEtBQUtZLGlCQUFpQixTQUFTLFdBQ2xDLEVBQUtuQixpQkFBaUIsRUFBS0osT0FBUSxFQUFLRSxNQUN6QyxJQUNEaEMsS0FBS29ELGNBQWNDLGlCQUFpQixTQUFTLFdBQzNDLEVBQUtDLDBCQUNOLElBQ0R0RCxLQUFLMkMsWUFBWVUsaUJBQWlCLFNBQVMsV0FDekMsRUFBS0Usd0JBQ04sR0FDRixNLHNFQTVEa0I3QixHLDBLQ0FBOEIsRUFBQUEsV0FDakIsV0FBWUMsSSw0RkFBTyxTQUNmekQsS0FBSzBELE9BQVNELEVBQ2R6RCxLQUFLMkQsVUFBWTNELEtBQUs0RCxnQkFBZ0JDLEtBQUs3RCxLQUM5QyxDLHlDQUVELFdBQ0lBLEtBQUswRCxPQUFPVCxVQUFVYSxJQUFJLGdCQUMxQjNCLFNBQVNrQixpQkFBaUIsVUFBV3JELEtBQUsyRCxVQUM3QyxHLG1CQUVELFdBQ0kzRCxLQUFLMEQsT0FBT1QsVUFBVUUsT0FBTyxnQkFDN0JoQixTQUFTNEIsb0JBQW9CLFVBQVcvRCxLQUFLMkQsVUFDaEQsRyw2QkFFRCxTQUFnQkssR0FDSSxXQUFaQSxFQUFJQyxLQUNKakUsS0FBS2tFLE9BRVosRywrQkFFRCxXQUFvQixXQUNDbEUsS0FBSzBELE9BQU90QixjQUFjLGlCQUNsQ2lCLGlCQUFpQixTQUFTLFdBQy9CLEVBQUthLE9BQ1IsSUFDRGxFLEtBQUswRCxPQUFPTCxpQkFBaUIsYUFBYSxTQUFDVyxHQUNuQ0EsRUFBSUcsT0FBT2xCLFVBQVVtQixTQUFTLGlCQUM5QixFQUFLRixPQUVaLEdBQ0osTSxzRUFoQ2dCVixHLHl3Q0NFQWEsRUFBQUEsU0FBQUEsSSw2ckJBQ2pCLFdBQVlDLEVBQWVDLEdBQVEsYSw0RkFBQSxVQUMvQixjQUFNRCxJQUNERSxRQUFVRCxFQUNmLEVBQUtFLFdBQWEsRUFBS2YsT0FBT3RCLGNBQWMsZ0JBQzVDLEVBQUtzQyxZQUFjLEVBQUtELFdBQVdFLGlCQUFpQixnQkFKckIsQ0FLbEMsQyw0Q0FFRCxXQUNJLElBQU1DLEVBQVksQ0FBQyxFQUluQixPQUhBNUUsS0FBSzBFLFlBQVlHLFNBQVEsU0FBQUMsR0FDckJGLEVBQVVFLEVBQU16RCxNQUFReUQsRUFBTUMsS0FDakMsSUFDTUgsQ0FDVixHLDRCQUdILFNBQWVoRCxHQUNiNUIsS0FBS2dGLFdBQVdILFNBQVEsU0FBQ0MsR0FFdkJBLEVBQU1DLE1BQVFuRCxFQUFLa0QsRUFBTXpELEtBQzFCLEdBQ0YsRywrQkFFQyxXQUFvQixXQUNoQixzREFDQXJCLEtBQUt5RSxXQUFXcEIsaUJBQWlCLFVBQVUsU0FBQzRCLEdBQ3hDQSxFQUFNQyxpQkFDTixFQUFLVixRQUFRLEVBQUtXLGtCQUNyQixHQUNKLEcsbUJBRUQsV0FDSSwwQ0FDQW5GLEtBQUt5RSxXQUFXVyxPQUNuQixNLHNFQW5DZ0JmLENBQXNCYixHLDBLQ0Z0QjZCLEVBQUFBLFdBQ2pCLGFBQXlCQyxHQUFXLElBQXZCQyxFQUF1QixFQUF2QkEsVSw0RkFBdUIsU0FFaEN2RixLQUFLd0YsVUFBWUQsRUFDakJ2RixLQUFLeUYsV0FBYUgsQ0FDckIsQyw0Q0FFRCxTQUFRSSxHQUNKMUYsS0FBS3lGLFdBQVdFLFFBQVFELEVBQzNCLEcseUJBRUQsU0FBWUUsR0FBTyxXQUNmQSxFQUFNZixTQUFRLFNBQUFnQixHQUNWLEVBQUtMLFVBQVVLLEVBQ2xCLEdBQ0osTSxzRUFmZ0JSLEcseXdDQ0VBUyxFQUFBQSxTQUFBQSxJLDZyQkFDakIsV0FBWXhCLEdBQWUsYSw0RkFBQSxVQUN2QixjQUFNQSxJQUNEeUIsU0FBVyxFQUFLckMsT0FBT3RCLGNBQWMsZUFDMUMsRUFBS00sU0FBVyxFQUFLZ0IsT0FBT3RCLGNBQWMsb0JBSG5CLENBSTFCLEMsaUNBRUQsU0FBS2YsRUFBTUksR0FDUHpCLEtBQUsrRixTQUFTakQsSUFBTXJCLEVBQ3BCekIsS0FBSytGLFNBQVNsRCxJQUFNeEIsRUFDcEJyQixLQUFLMEMsU0FBU0ssWUFBYzFCLEVBQzVCLHdDQUNILE0sc0VBWmdCeUUsQ0FBdUJ0QyxHLDBLQ0Z2QndDLEVBQUFBLFdBQ2pCLGNBQWdELElBQWxDQyxFQUFrQyxFQUFsQ0EsU0FBVUMsRUFBd0IsRUFBeEJBLFNBQVVDLEVBQWMsRUFBZEEsWSw0RkFBYyxTQUM1Q25HLEtBQUtvRyxVQUFZSCxFQUNqQmpHLEtBQUtxRyxVQUFZSCxFQUNqQmxHLEtBQUtzRyxZQUFjSCxDQUN0QixDLGdEQUVELFdBQ0ksSUFBTXBGLEVBQVcsQ0FBQyxFQUlsQixPQUhBQSxFQUFRLEtBQVdmLEtBQUtvRyxVQUFVckQsWUFDbENoQyxFQUFRLEtBQVdmLEtBQUtxRyxVQUFVdEQsWUFDbENoQyxFQUFRLE9BQWFmLEtBQUtzRyxZQUFZeEQsSUFDL0IvQixDQUVWLEcseUJBRUQsU0FBWUEsR0FDUmYsS0FBS29HLFVBQVVyRCxZQUFjaEMsRUFBU00sS0FDdENyQixLQUFLcUcsVUFBVXRELFlBQWNoQyxFQUFTUSxLQUN0Q3ZCLEtBQUtzRyxZQUFZeEQsSUFBTS9CLEVBQVN3RixNQUNuQyxNLHNFQXBCZ0JQLEcsa1NDQUFRLEVBQUFBLFdBQ2pCLFdBQVlDLEVBQWVDLEdBQU0sWSw0RkFBQSw4QkFRcEIsU0FBQ0MsRUFBY0MsR0FDeEIsSUFBTUMsRUFBZSxFQUFLQyxhQUFhMUUsY0FBbEIsV0FBb0N1RSxFQUFhSSxHQUFqRCxXQUNyQkosRUFBYTFELFVBQVVhLElBQUksRUFBS2tELE1BQU1DLGlCQUN0Q0osRUFBYTlELFlBQWM2RCxFQUMzQkMsRUFBYTVELFVBQVVhLElBQUksRUFBS2tELE1BQU1FLFdBQ3pDLElBYmdDLHFCQWdCcEIsU0FBQ1AsR0FDVixJQUFNRSxFQUFlLEVBQUtDLGFBQWExRSxjQUFsQixXQUFvQ3VFLEVBQWFJLEdBQWpELFdBQ3JCSixFQUFhMUQsVUFBVUUsT0FBTyxFQUFLNkQsTUFBTUMsaUJBQ3pDSixFQUFhNUQsVUFBVUUsT0FBTyxFQUFLNkQsTUFBTUUsWUFDekNMLEVBQWE5RCxZQUFjLEdBQzlCLElBckJnQyw4QkF3QlgsU0FBQzRELEdBQ2RBLEVBQWFRLFNBQVNDLE1BR3ZCLEVBQUtDLFdBQVdWLEdBRmhCLEVBQUtXLFdBQVdYLEVBQWNBLEVBQWFZLGtCQUlsRCxJQTdCR3ZILEtBQUtnSCxNQUFRUCxFQUNiekcsS0FBSzhHLGFBQWVKLEVBQ3BCMUcsS0FBS2dGLFdBQWF3QyxNQUFNQyxLQUFLekgsS0FBSzhHLGFBQWFuQyxpQkFBaUIsaUJBQ2hFM0UsS0FBSzBILGVBQWlCMUgsS0FBSzhHLGFBQWExRSxjQUFjcEMsS0FBS2dILE1BQU1XLHFCQUNwRSxDLHVEQTJCRCxXQUFxQixXQUNqQjNILEtBQUs0SCxvQkFDTDVILEtBQUtnRixXQUFXSCxTQUFRLFNBQUM4QixHQUNyQkEsRUFBYXRELGlCQUFpQixTQUFTLFdBQ25DLEVBQUt3RSxvQkFBb0JsQixHQUN6QixFQUFLaUIsbUJBQ1IsR0FDSixHQUNKLEcsOEJBRUQsV0FDSTVILEtBQUs0QyxxQkFDTDVDLEtBQUs4RyxhQUFhekQsaUJBQWlCLFVBQVUsU0FBQ1csR0FDMUNBLEVBQUlrQixnQkFDUCxHQUNKLEcsOEJBRUQsV0FDSSxPQUFPbEYsS0FBS2dGLFdBQVc4QyxNQUFLLFNBQUNuQixHQUN6QixPQUFRQSxFQUFhUSxTQUFTQyxLQUNqQyxHQUNKLEcsZ0NBR0QsV0FDSXBILEtBQUswSCxlQUFlekUsVUFBVWEsSUFBSTlELEtBQUtnSCxNQUFNZSxxQkFDN0MvSCxLQUFLMEgsZUFBZU0sVUFBVyxDQUNsQyxHLCtCQUVELFdBQ1FoSSxLQUFLaUksbUJBQ0xqSSxLQUFLa0ksc0JBRUxsSSxLQUFLMEgsZUFBZXpFLFVBQVVFLE9BQU9uRCxLQUFLZ0gsTUFBTWUscUJBQ2hEL0gsS0FBSzBILGVBQWVNLFVBQVcsRUFFdEMsRyw2QkFFRCxXQUFrQixXQUNkaEksS0FBSzRILG9CQUNMNUgsS0FBS2dGLFdBQVdILFNBQVEsU0FBQzhCLEdBQ3JCLEVBQUtVLFdBQVdWLEVBQ25CLEdBQ0osTSxzRUE1RWdCSCxHQ0FSMkIsRUFBaUJoRyxTQUFTQyxjQUFjLHlCQUN4Q2dHLEVBQW1CakcsU0FBU0MsY0FBYyxtQkFDMUNpRyxFQUFlbEcsU0FBU0MsY0FBYyxrQkFDdENrRyxFQUFZbkcsU0FBU0MsY0FBYyxlQUNuQ21HLEVBQVlwRyxTQUFTQyxjQUFjLGVBQ25Db0csRUFBY3JHLFNBQVNDLGNBQWMsa0JBQ3JDcUcsRUFBY3RHLFNBQVNDLGNBQWMsa0JBQ3JDc0csRUFBY3ZHLFNBQVNDLGNBQWMsd0JBQ3JDdUcsRUFBYXhHLFNBQVNDLGNBQWMsYUFDcEN3RyxFQUFhekcsU0FBU0MsY0FBYyxrQkFDcEN5RyxFQUFnQjFHLFNBQVNDLGNBQWMsb0JBVXZDMEcsRUFBaUIsQ0FBQyxFQ0p6QkMsRUFBTSxJQUFJakosRUFBSSxDQUNsQkksUUFBUyw4Q0FDVEUsUUFBUyxDQUNQNEMsY0FBZSx1Q0FDZixlQUFnQixzQkFJZGtELEVBQVcsSUFBSUYsRUFBUyxDQUM1QkMsU0FBVXVDLEVBQ1Z0QyxTQUFVdUMsRUFDVnRDLFdBQVkwQyxJQWNSRyxFQUFpQixJQUFJM0UsRUFBYytELEdBWHRCLFNBQUNhLEdBQ2xCakksUUFBUUMsSUFBSWdJLEVBQWMsMEJBQzFCRixFQUFJRyxZQUFZRCxHQUNmcEksTUFBSyxTQUFDb0ksR0FDTGpJLFFBQVFDLElBQUlnSSxFQUFjLHNCQUN4Qi9DLEVBQVNnRCxZQUFZRCxHQUNyQkQsRUFBZTlFLE9BQ2hCLEdBRUosSUFHRDhFLEVBQWVHLG9CQUVmaEIsRUFBZTlFLGlCQUFpQixTQUFTLFdBQ3ZDeUYsRUFBZSxhQUFmQSxrQkFDQSxJQUFNL0gsRUFBV21GLEVBQVNrRCxjQUMxQmIsRUFBVXhELE1BQVFoRSxFQUFTUSxLQUMzQitHLEVBQVV2RCxNQUFRaEUsRUFBU00sS0FDM0IySCxFQUFlSyxNQUNoQixJQUVELElBQU1DLEVBQVUsSUFBSXhELEVBQWU4QyxHQUNuQ1UsRUFBUUgsb0JBRVIsSUFBTUksRUFBYSxTQUFDM0gsR0FTbEIsT0FSYSxJQUFJRixFQUNmLENBQ0VFLEtBQU1BLEVBQ05DLGdCQUFpQixTQUFDUixFQUFNSSxHQUN0QjZILEVBQVFELEtBQUtoSSxFQUFNSSxFQUNwQixHQUNBLGlCQUNvQitILGNBRTFCLEVBT0tDLEVBQXFCLElBQUlwRixFQUFjZ0UsR0FMM0IsU0FBQ3FCLEdBQ2pCQyxFQUFVQyxRQUFRTCxFQUFXRyxJQUM3QkQsRUFBbUJ2RixPQUNwQixJQUdEdUYsRUFBbUJOLG9CQUVuQlQsRUFBWXJGLGlCQUFpQixTQUFTLFdBQ3BDeUYsRUFBZSxZQUFmQSxrQkFDQVcsRUFBbUJKLE1BQ3BCLElBRUQsSUFTMEJRLEVBVHBCRixFQUFZLElBQUl0RSxFQUFRLENBQzVCRSxTQUFVLFNBQUNNLEdBQ1Q4RCxFQUFVQyxRQUFRTCxFQUFXMUQsR0FDOUIsR0FDQThDLEdBRUhnQixFQUFVRyxZQ3RGYSxDQUNuQixDQUNFL0gsTUFBTyxvQkFDUE4sS0FBTSxrS0FFUixDQUNFTSxNQUFPLG9CQUNQTixLQUFNLG9LRGtGY29JLEVEN0VLLENBQzdCRSxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZyQyxxQkFBc0IsaUJBQ3RCSSxvQkFBcUIsOEJBQ3JCZCxnQkFBaUIsMEJBQ2pCQyxXQUFZLDZCQ3dFS00sTUFBTUMsS0FBS3RGLFNBQVN3QyxpQkFBaUJrRixFQUFnQkUsZUFDN0RsRixTQUFRLFNBQUNvRixHQUNoQixJQUFNQyxFQUFZLElBQUkxRCxFQUFjcUQsRUFBaUJJLEdBRS9DRSxFQUFXRixFQUFZRyxhQUFhLFFBRTFDdEIsRUFBZXFCLEdBQVlELEVBQzNCQSxFQUFVRyxrQkFDWCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jYXJkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgICB9XG4gICAgX2NoZWNrKHJlcykge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gICAgLy8gZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIC8vICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgLy8gICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIC8vICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIC8vICAgICB9KVxuICAgIC8vICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrKHJlcykpXG4gICAgLy8gICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc3QgY2FyZE9iaiA9IHt9O1xuICAgIC8vICAgICAgICAgICAgICAgICBjYXJkT2JqLnRpdGxlID0gaXRlbS5uYW1lO1xuICAgIC8vICAgICAgICAgICAgICAgICBjYXJkT2JqLmxpbmsgPSBpdGVtLmxpbms7XG4gICAgLy8gICAgICAgICAgICAgICAgIGluaXRpYWxDYXJkcy5wdXNoKGNhcmRPYmopO1xuICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxDYXJkcztcbiAgICAvLyAgICAgICAgIH0pXG4gICAgLy8gfVxuXG4gICAgLy8gc2V0SW5pdGlhbENhcmRzKCkge1xuXG4gICAgLy8gfVxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2socmVzKSlcbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSwgJ9CyIHNldFVzZXJJbmZvLCBjbGFzcycpO1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgYWJvdXQ6IHVzZXJEYXRhLmluZm9cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2socmVzKSlcbiAgICB9XG5cbiAgICBhZGRDYXJkKGNhcmREYXRhKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGxpbms6IGNhcmREYXRhLmxpbmtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVjayhyZXMpKTtcbiAgICB9XG5cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrIH0sIGNhcmRTZWxlY3Rvcikge1xuICAgIHRoaXMuX3RpdGxlID0gZGF0YS50aXRsZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2ltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltZycpO1xuICAgIHRoaXMuX2ltZ05hbWUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19uYW1lJyk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2ltZy5hbHQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLl9pbWcuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9pbWdOYW1lLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgZmV0Y2goJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDYvY2FyZHMnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAnNGFiNTU1ZTEtMzlhMC00OGU2LTg1OTMtNmU4YTRhODRlMjhmJyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX3RpdGxlLFxuICAgICAgICAgICAgICAgIGxpbms6IHRoaXMuX2xpbmtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2hhbmRsZUNsaWNrTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2VfY2xpY2snKTtcbiAgfVxuXG4gIF9oYW5kbGVDbGlja0RlbGV0ZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpO1xuICAgIHRoaXMuX2ltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl90aXRsZSwgdGhpcy5fbGluaylcbiAgICB9KTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0RlbGV0ZUJ1dHRvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0xpa2VCdXR0b24oKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XG4gICAgICAgIHRoaXMuX2VzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2VzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9lc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKTtcbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdCkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fc3VibWl0ID0gc3VibWl0O1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbnB1dCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2l0ZW0nKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0RGF0YSA9IHt9O1xuICAgICAgICB0aGlzLl9wb3B1cElucHV0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgaW5wdXREYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW5wdXREYXRhO1xuICAgIH1cblxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgLy8g0YLRg9GCINCy0YHRgtCw0LLQu9GP0LXQvCDQsiBgdmFsdWVgINC40L3Qv9GD0YLQsCDQtNCw0L3QvdGL0LUg0LjQtyDQvtCx0YrQtdC60YLQsCDQv9C+INCw0YLRgNC40LHRg9GC0YMgYG5hbWVgINGN0YLQvtCz0L4g0LjQvdC/0YPRgtCwXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHtyZW5kZXJlciB9LCBjb250YWluZXIpIHtcbiAgICAgICAgLy8gdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faW1nTGluayA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nJyk7XG4gICAgICAgIHRoaXMuX2ltZ05hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2luZm8taW1nJyk7XG4gICAgfVxuXG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgICAgIHRoaXMuX2ltZ0xpbmsuc3JjID0gbGluaztcbiAgICAgICAgdGhpcy5faW1nTGluay5hbHQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9pbWdOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckluZm8sIHVzZXJBdmF0YXIgfSkge1xuICAgICAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHVzZXJJbmZvO1xuICAgICAgICB0aGlzLl91c2VyQXZhdGFyID0gdXNlckF2YXRhcjtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSB7fTtcbiAgICAgICAgdXNlckRhdGFbJ25hbWUnXSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xuICAgICAgICB1c2VyRGF0YVsnaW5mbyddID0gdGhpcy5fdXNlckluZm8udGV4dENvbnRlbnQ7XG4gICAgICAgIHVzZXJEYXRhWydhdmF0YXInXSA9IHRoaXMuX3VzZXJBdmF0YXIuc3JjO1xuICAgICAgICByZXR1cm4gdXNlckRhdGE7XG5cbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLnRleHRDb250ZW50ID0gdXNlckRhdGEuaW5mbztcbiAgICAgICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSB1c2VyRGF0YS5hdmF0YXI7XG4gICAgfVxuXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoZm9ybUNsYXNzTGlzdCwgZm9ybSkge1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybUNsYXNzTGlzdDtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybS5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfTtcblxuICAgIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQtNC+0LHQsNCy0LvRj9C10YIg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuVxuICAgIF9zaG93RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZm9ybS5lcnJvckNsYXNzKTtcbiAgICB9O1xuXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINGD0LTQsNC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcbiAgICBfaGlkZUVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Zvcm0uaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybS5lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCIgXCI7XG4gICAgfTtcblxuICAgIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQv9GA0L7QstC10YDRj9C10YIg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70Y9cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSlcbiAgICB9O1xuXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy/RhNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0LTQtdC70LDQtdGCINC60L3QvtC/0LrRgyDQvdC10LDQutGC0LjQstC90L7QuSBcbiAgICBtYWtlQnV0dG9uRGlzYWJsZWQoKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZVxuICAgIH07XG5cbiAgICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICAgICAgICB0aGlzLm1ha2VCdXR0b25EaXNhYmxlZCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybS5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufSIsImV4cG9ydCBjb25zdCBlZGl0QnRuUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZm9yX2VkaXQnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZm9yX2FkZCcpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPW5hbWVdJyk7XG5leHBvcnQgY29uc3QgaW5mb0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9aW5mb10nKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW5mbycpO1xuZXhwb3J0IGNvbnN0IGFkZEJ0bkltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBibG9ja0NhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzJyk7XG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9mb3JfaW1nJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwVmFsaWRhdGlvbiA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fdHlwZV9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXG59O1xuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307IiwiaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCB7IGluaXRpYWwgfSBmcm9tIFwiLi4vdXRpbHMvY2FyZHMuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQge1xuICBlZGl0QnRuUHJvZmlsZSwgcG9wdXBFZGl0UHJvZmlsZSwgcG9wdXBBZGRDYXJkLCBuYW1lSW5wdXQsXG4gIGluZm9JbnB1dCwgcHJvZmlsZU5hbWUsIHByb2ZpbGVJbmZvLCBhZGRCdG5JbWFnZSxcbiAgYmxvY2tDYXJkcywgaW1hZ2VQb3B1cCwgcG9wdXBWYWxpZGF0aW9uLFxuICBmb3JtVmFsaWRhdG9ycywgcHJvZmlsZUF2YXRhclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00NicsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnNGFiNTU1ZTEtMzlhMC00OGU2LTg1OTMtNmU4YTRhODRlMjhmJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHVzZXJOYW1lOiBwcm9maWxlTmFtZSxcbiAgdXNlckluZm86IHByb2ZpbGVJbmZvLFxuICB1c2VyQXZhdGFyOiBwcm9maWxlQXZhdGFyXG59KTtcblxuY29uc3Qgc3VibWl0RWRpdCA9IChkYXRhRWRpdEZvcm0pID0+IHtcbiAgY29uc29sZS5sb2coZGF0YUVkaXRGb3JtLCAn0LIgc3VibWl0RWRpdCwg0LIg0L3QsNGH0LDQu9C1Jyk7XG4gIGFwaS5zZXRVc2VySW5mbyhkYXRhRWRpdEZvcm0pXG4gIC50aGVuKChkYXRhRWRpdEZvcm0pID0+IHtcbiAgICBjb25zb2xlLmxvZyhkYXRhRWRpdEZvcm0sICfQsiBzdWJtaXRFZGl0LCB0aGVuJyk7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhRWRpdEZvcm0pO1xuICAgICAgaGFuZGxlRWRpdEZvcm0uY2xvc2UoKTtcbiAgICB9XG4gIClcbn1cblxuY29uc3QgaGFuZGxlRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRQcm9maWxlLCBzdWJtaXRFZGl0KTtcbmhhbmRsZUVkaXRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmVkaXRCdG5Qcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1snZm9ybS1pbmZvJ10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKVxuICBpbmZvSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5pbmZvO1xuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBoYW5kbGVFZGl0Rm9ybS5vcGVuKCk7XG59KTtcblxuY29uc3Qgem9vbUltZyA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZVBvcHVwKTtcbnpvb21JbWcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBkYXRhOiBkYXRhLFxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaykgPT4ge1xuICAgICAgICB6b29tSW1nLm9wZW4obmFtZSwgbGluayk7XG4gICAgICB9XG4gICAgfSwgJy5pbWctdGVtcGxhdGUnKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59O1xuXG5jb25zdCBzdWJtaXRBZGQgPSAoZGF0YUFkZEZvcm0pID0+IHtcbiAg0YFhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YUFkZEZvcm0pKTtcbiAgaGFuZGxlQWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG59O1xuXG5jb25zdCBoYW5kbGVBZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZENhcmQsIHN1Ym1pdEFkZCk7XG5oYW5kbGVBZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYWRkQnRuSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzWydmb3JtLWFkZCddLnJlc2V0VmFsaWRhdGlvbigpO1xuICBoYW5kbGVBZGRDYXJkUG9wdXAub3BlbigpO1xufSlcblxuY29uc3Qg0YFhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAg0YFhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICB9XG59LCBibG9ja0NhcmRzKTtcblxu0YFhcmRzTGlzdC5yZW5kZXJJdGVtcyhpbml0aWFsKTtcblxuLy8g0JLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuFxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChwb3B1cFZhbGlkYXRpb24pID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocG9wdXBWYWxpZGF0aW9uLmZvcm1TZWxlY3RvcikpXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IocG9wdXBWYWxpZGF0aW9uLCBmb3JtRWxlbWVudClcbiAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDQvdC90YvQtSDQuNC3INCw0YLRgNC40LHRg9GC0LAgYG5hbWVgINGDINGE0L7RgNC80YtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpXG4gICAgLy8g0LLQvtGCINGC0YPRgiDQsiDQvtCx0YrQtdC60YIg0LfQsNC/0LjRgdGL0LLQsNC10Lwg0L/QvtC0INC40LzQtdC90LXQvCDRhNC+0YDQvNGLXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihwb3B1cFZhbGlkYXRpb24pOyIsImV4cG9ydCBjb25zdCBpbml0aWFsID0gW1xuICAgIHtcbiAgICAgIHRpdGxlOiAnVG9zaGkg0LIg0YLQvtC70YHRgtC+0LLQutC1JyxcbiAgICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUzNDQzMjU4NjA0My1lYWQ1Yjk5MjI5ZmI/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE1MDgmcT04MCdcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnVG9zaGkg0LIg0LTQvtC20LTQuNCy0LjQutC1JyxcbiAgICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUzMDA0MTY4NjI1OS01M2QyNmY4NjMzMTM/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTI2MTkmcT04MCdcbiAgICB9XG4gIF07XG4iXSwibmFtZXMiOlsiQXBpIiwib3B0aW9ucyIsInRoaXMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrIiwidXNlckRhdGEiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJuYW1lIiwiYWJvdXQiLCJpbmZvIiwiY2FyZERhdGEiLCJsaW5rIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJfdGl0bGUiLCJ0aXRsZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfaW1nIiwiX2ltZ05hbWUiLCJfbGlrZUJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsImFsdCIsInNyYyIsInRleHRDb250ZW50IiwiYXV0aG9yaXphdGlvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsIl9kZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUNsaWNrRGVsZXRlQnV0dG9uIiwiX2hhbmRsZUNsaWNrTGlrZUJ1dHRvbiIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfZXNjQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXBTZWxlY3RvciIsInN1Ym1pdCIsIl9zdWJtaXQiLCJfcG9wdXBGb3JtIiwiX3BvcHVwSW5wdXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXREYXRhIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJfaW5wdXRMaXN0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaXRlbXMiLCJpdGVtIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1nTGluayIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySW5mbyIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckluZm8iLCJfdXNlckF2YXRhciIsImF2YXRhciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtQ2xhc3NMaXN0IiwiZm9ybSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImlkIiwiX2Zvcm0iLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJBcnJheSIsImZyb20iLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5Iiwic29tZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJtYWtlQnV0dG9uRGlzYWJsZWQiLCJlZGl0QnRuUHJvZmlsZSIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cEFkZENhcmQiLCJuYW1lSW5wdXQiLCJpbmZvSW5wdXQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVJbmZvIiwiYWRkQnRuSW1hZ2UiLCJibG9ja0NhcmRzIiwiaW1hZ2VQb3B1cCIsInByb2ZpbGVBdmF0YXIiLCJmb3JtVmFsaWRhdG9ycyIsImFwaSIsImhhbmRsZUVkaXRGb3JtIiwiZGF0YUVkaXRGb3JtIiwic2V0VXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsImdldFVzZXJJbmZvIiwib3BlbiIsInpvb21JbWciLCJjcmVhdGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiaGFuZGxlQWRkQ2FyZFBvcHVwIiwiZGF0YUFkZEZvcm0iLCLRgWFyZHNMaXN0IiwiYWRkSXRlbSIsInBvcHVwVmFsaWRhdGlvbiIsInJlbmRlckl0ZW1zIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==