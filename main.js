(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var n,o;return n=t,o=[{key:"_check",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._check(t)}))}},{key:"getUserInfo",value:function(e,t,n){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.json()})).then((function(o){e.textContent=o.name,t.textContent=o.about,n.src=o.avatar}))}}],o&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(t,n){var o=t.data,r=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=o.title,this._link=o.link,this._cardSelector=n,this._handleCardClick=r}var t,o;return t=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._img=this._element.querySelector(".element__img"),this._imgName=this._element.querySelector(".element__name"),this._likeButton=this._element.querySelector(".element__like"),this._setEventListeners(),this._img.alt=this._title,this._img.src=this._link,this._imgName.textContent=this._title,fetch("https://mesto.nomoreparties.co/v1/cohort-46/cards",{method:"POST",headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f","Content-Type":"application/json"},body:JSON.stringify({name:this._title,link:this._link})}),this._element}},{key:"_handleClickLikeButton",value:function(){this._likeButton.classList.toggle("element__like_click")}},{key:"_handleClickDeleteButton",value:function(){this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._deleteButton=this._element.querySelector(".element__delete"),this._img.addEventListener("click",(function(){e._handleCardClick(e._title,e._link)})),this._deleteButton.addEventListener("click",(function(){e._handleClickDeleteButton()})),this._likeButton.addEventListener("click",(function(){e._handleClickLikeButton()}))}}])&&n(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._escClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._escClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._escClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close()}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=s(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},c.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(o);if(r){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submit=t,n._popupForm=n._popup.querySelector(".popup__form"),n._popupInput=n._popupForm.querySelectorAll(".popup__item"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupInput.forEach((function(t){e[t.name]=t.value})),e}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;c(p(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._submit(e._getInputValues())}))}},{key:"close",value:function(){c(p(a.prototype),"close",this).call(this),this._popupForm.reset()}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var d=function(){function e(t,n){var o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=v(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},b.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function k(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(o);if(r){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imgLink=t._popup.querySelector(".popup__img"),t._imgName=t._popup.querySelector(".popup__info-img"),t}return t=a,(n=[{key:"open",value:function(e,t){this._imgLink.src=t,this._imgLink.alt=e,this._imgName.textContent=e,b(g(a.prototype),"open",this).call(this)}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var S=function(){function e(t){var n=t.userName,o=t.userInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userInfo=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._userName.textContent,e.info=this._userInfo.textContent,e}},{key:"setUserInfo",value:function(e){fetch("https://mesto.nomoreparties.co/v1/cohort-46/users/me",{method:"PATCH",headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f","Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.info})}),this._userName.textContent=e.name,this._userInfo.textContent=e.info}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"_showError",(function(e,t){var n=o._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(o._form.inputErrorClass),n.textContent=t,n.classList.add(o._form.errorClass)})),C(this,"_hideError",(function(e){var t=o._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(o._form.inputErrorClass),t.classList.remove(o._form.errorClass),t.textContent=" "})),C(this,"_checkInputValidity",(function(e){e.validity.valid?o._hideError(e):o._showError(e,e.validationMessage)})),this._form=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(".popup__item")),this._buttonElement=this._formElement.querySelector(this._form.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"makeButtonDisabled",value:function(){this._buttonElement.classList.add(this._form.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?this.makeButtonDisabled():(this._buttonElement.classList.remove(this._form.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideError(t)}))}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),L=document.querySelector(".profile__edit-button"),P=document.querySelector(".popup_for_edit"),B=document.querySelector(".popup_for_add"),q=document.querySelector("[name=name]"),I=document.querySelector("[name=info]"),T=document.querySelector(".profile__name"),D=document.querySelector(".profile__info"),H=document.querySelector(".profile__add-button"),M=document.querySelector(".elements"),R=document.querySelector(".popup_for_img"),V=document.querySelector(".profile__avatar"),A={},G=[];fetch("https://mesto.nomoreparties.co/v1/cohort-46/cards",{headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f"}}).then((function(e){return e.json()})).then((function(e){return e.forEach((function(e){var t={};t.title=e.name,t.link=e.link,G.push(t)})),G}));var N=new S({userName:T,userInfo:D}),U=new h(P,(function(e){N.setUserInfo(e),U.close()}));U.setEventListeners(),L.addEventListener("click",(function(){A["form-info"].resetValidation();var e=N.getUserInfo();I.value=e.info,q.value=e.name,U.open()}));var W=new E(R);W.setEventListeners();var Y=function(e){return new o({data:e,handleCardClick:function(e,t){W.open(e,t)}},".img-template").generateCard()},z=new h(B,(function(e){J.addItem(Y(e)),z.close()}));z.setEventListeners(),H.addEventListener("click",(function(){A["form-add"].resetValidation(),z.open()}));var F,J=new d({renderer:function(e){J.addItem(Y(e))}},M);J.renderItems([{title:"Toshi в толстовке",link:"https://images.unsplash.com/photo-1534432586043-ead5b99229fb?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1508&q=80"},{title:"Toshi в дождивике",link:"https://images.unsplash.com/photo-1530041686259-53d26f863313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2619&q=80"},{title:"Toshi француз",link:"https://images.unsplash.com/photo-1517519014922-8fc06b814a0e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1472&q=80"},{title:"Toshi в костюме Тоторо",link:"https://images.unsplash.com/photo-1517423738875-5ce310acd3da?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1540&q=80"},{title:"Toshi в джинсовке",link:"https://images.unsplash.com/photo-1518020382113-a7e8fc38eac9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1317&q=80"},{title:"Toshi на стиле",link:"https://images.unsplash.com/photo-1517423568366-8b83523034fd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"}]),F={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(F.formSelector)).forEach((function(e){var t=new x(F,e),n=e.getAttribute("name");A[n]=t,t.enableValidation()})),new t({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-46",headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f","Content-Type":"application/json"}}).getUserInfo(T,D,V)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNQRSxLQUFNLGtLQUVSLENBQ0VGLE1BQU8sZ0JBQ1BFLEtBQU0sa0tBRVIsQ0FDRUYsTUFBTyx5QkFDUEUsS0FBTSxrS0FFUixDQUNFRixNQUFPLG9CQUNQRSxLQUFNLGtLQUVSLENBQ0VGLE1BQU8saUJBQ1BFLEtBQU0sb0tEcUZjNkgsRURoR0ssQ0FDN0JFLGFBQWMsZUFDZEMsY0FBZSxnQkFDZnBDLHFCQUFzQixpQkFDdEJJLG9CQUFxQiw4QkFDckJkLGdCQUFpQiwwQkFDakJDLFdBQVksNkJDMkZLTSxNQUFNQyxLQUFLdkYsU0FBUzBDLGlCQUFpQmdGLEVBQWdCRSxlQUM3RGhGLFNBQVEsU0FBQ2tGLEdBQ2hCLElBQU1DLEVBQVksSUFBSXpELEVBQWNvRCxFQUFpQkksR0FFL0NFLEVBQVdGLEVBQVlHLGFBQWEsUUFFMUN4QixFQUFldUIsR0FBWUQsRUFDM0JBLEVBQVVHLGtCQUNYLElBS1MsSUFBSXJLLEVBQUksQ0FDbEJJLFFBQVMsOENBQ1RFLFFBQVMsQ0FDUHlDLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBSWhCcUcsWUFBWXBJLEVBQWFDLEVBQWFDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NhcmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICAgIH1cblxuICAgIF9jaGVjayhyZXMpIHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2socmVzKSk7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8ocHJvZmlsZU5hbWUsIHByb2ZpbGVJbmZvLCBwcm9maWxlQXZhdGFyKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcmVzdWx0Lm5hbWU7XG4gICAgICAgICAgICAgICAgcHJvZmlsZUluZm8udGV4dENvbnRlbnQgPSByZXN1bHQuYWJvdXQ7XG4gICAgICAgICAgICAgICAgcHJvZmlsZUF2YXRhci5zcmMgPSByZXN1bHQuYXZhdGFyO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIC8vINC00YDRg9Cz0LjQtSDQvNC10YLQvtC00Ysg0YDQsNCx0L7RgtGLINGBIEFQSVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5faW1nID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1nJyk7XG4gICAgdGhpcy5faW1nTmFtZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX25hbWUnKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5faW1nLmFsdCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX2ltZy5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2ltZ05hbWUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgICBmZXRjaCgnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00Ni9jYXJkcycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICc0YWI1NTVlMS0zOWEwLTQ4ZTYtODU5My02ZThhNGE4NGUyOGYnLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5fdGl0bGUsXG4gICAgICAgICAgICAgICAgbGluazogdGhpcy5fbGlua1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfaGFuZGxlQ2xpY2tMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9jbGljaycpO1xuICB9XG5cbiAgX2hhbmRsZUNsaWNrRGVsZXRlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlJyk7XG4gICAgdGhpcy5faW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX3RpdGxlLCB0aGlzLl9saW5rKVxuICAgIH0pO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNsaWNrRGVsZXRlQnV0dG9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNsaWNrTGlrZUJ1dHRvbigpO1xuICAgIH0pO1xuICB9O1xufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcbiAgICAgICAgdGhpcy5fZXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2VzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpO1xuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9zdWJtaXQgPSBzdWJtaXQ7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgICAgICB0aGlzLl9wb3B1cElucHV0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgaW5wdXREYXRhID0ge307XG4gICAgICAgIHRoaXMuX3BvcHVwSW5wdXQuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICBpbnB1dERhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpbnB1dERhdGE7XG4gICAgfVxuXG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAvLyDRgtGD0YIg0LLRgdGC0LDQstC70Y/QtdC8INCyIGB2YWx1ZWAg0LjQvdC/0YPRgtCwINC00LDQvdC90YvQtSDQuNC3INC+0LHRitC10LrRgtCwINC/0L4g0LDRgtGA0LjQsdGD0YLRgyBgbmFtZWAg0Y3RgtC+0LPQviDQuNC90L/Rg9GC0LBcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioe3JlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xuICAgICAgICAvLyB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWdMaW5rID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbiAgICAgICAgdGhpcy5faW1nTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5mby1pbWcnKTtcbiAgICB9XG5cbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICAgICAgdGhpcy5faW1nTGluay5zcmMgPSBsaW5rO1xuICAgICAgICB0aGlzLl9pbWdMaW5rLmFsdCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX2ltZ05hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCB1c2VySW5mbyB9KSB7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvID0gdXNlckluZm87XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIGNvbnN0IHVzZXJEYXRhID0ge307XG4gICAgICAgIHVzZXJEYXRhWyduYW1lJ10gPSB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudDtcbiAgICAgICAgdXNlckRhdGFbJ2luZm8nXSA9IHRoaXMuX3VzZXJJbmZvLnRleHRDb250ZW50O1xuICAgICAgICByZXR1cm4gdXNlckRhdGE7XG5cbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgICAgICBmZXRjaCgnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00Ni91c2Vycy9tZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAnNGFiNTU1ZTEtMzlhMC00OGU2LTg1OTMtNmU4YTRhODRlMjhmJyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgYWJvdXQ6IHVzZXJEYXRhLmluZm9cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLnRleHRDb250ZW50ID0gdXNlckRhdGEuaW5mbztcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoZm9ybUNsYXNzTGlzdCwgZm9ybSkge1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybUNsYXNzTGlzdDtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybS5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfTtcblxuICAgIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQtNC+0LHQsNCy0LvRj9C10YIg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuVxuICAgIF9zaG93RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZm9ybS5lcnJvckNsYXNzKTtcbiAgICB9O1xuXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINGD0LTQsNC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcbiAgICBfaGlkZUVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Zvcm0uaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybS5lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCIgXCI7XG4gICAgfTtcblxuICAgIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQv9GA0L7QstC10YDRj9C10YIg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70Y9cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSlcbiAgICB9O1xuXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy/RhNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0LTQtdC70LDQtdGCINC60L3QvtC/0LrRgyDQvdC10LDQutGC0LjQstC90L7QuSBcbiAgICBtYWtlQnV0dG9uRGlzYWJsZWQoKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZVxuICAgIH07XG5cbiAgICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICAgICAgICB0aGlzLm1ha2VCdXR0b25EaXNhYmxlZCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybS5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufSIsImV4cG9ydCBjb25zdCBlZGl0QnRuUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZm9yX2VkaXQnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZm9yX2FkZCcpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPW5hbWVdJyk7XG5leHBvcnQgY29uc3QgaW5mb0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9aW5mb10nKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW5mbycpO1xuZXhwb3J0IGNvbnN0IGFkZEJ0bkltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBibG9ja0NhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzJyk7XG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9mb3JfaW1nJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwVmFsaWRhdGlvbiA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fdHlwZV9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXG59O1xuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307IiwiaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCB7IGluaXRpYWwgfSBmcm9tIFwiLi4vdXRpbHMvY2FyZHMuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQge1xuICBlZGl0QnRuUHJvZmlsZSwgcG9wdXBFZGl0UHJvZmlsZSwgcG9wdXBBZGRDYXJkLCBuYW1lSW5wdXQsXG4gIGluZm9JbnB1dCwgcHJvZmlsZU5hbWUsIHByb2ZpbGVJbmZvLCBhZGRCdG5JbWFnZSxcbiAgYmxvY2tDYXJkcywgaW1hZ2VQb3B1cCwgcG9wdXBWYWxpZGF0aW9uLFxuICBmb3JtVmFsaWRhdG9ycywgcHJvZmlsZUF2YXRhclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cblxuLy8gZmV0Y2goJ2h0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDYvdXNlcnMvbWUnLCB7XG4vLyAgIGhlYWRlcnM6IHtcbi8vICAgICBhdXRob3JpemF0aW9uOiAnNGFiNTU1ZTEtMzlhMC00OGU2LTg1OTMtNmU4YTRhODRlMjhmJ1xuLy8gICB9XG4vLyB9KVxuLy8gICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbi8vICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuLy8gICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcmVzdWx0Lm5hbWU7XG4vLyAgICAgcHJvZmlsZUluZm8udGV4dENvbnRlbnQgPSByZXN1bHQuYWJvdXQ7XG4vLyAgICAgcHJvZmlsZUF2YXRhci5zcmMgPSByZXN1bHQuYXZhdGFyO1xuLy8gICB9KTtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW107IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZmV0Y2goJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDYvY2FyZHMnLCB7XG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnNGFiNTU1ZTEtMzlhMC00OGU2LTg1OTMtNmU4YTRhODRlMjhmJ1xuICB9XG59KVxuICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIHJlc3VsdC5mb3JFYWNoIChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgY29uc3QgY2FyZE9iaiA9IHt9O1xuICAgICAgY2FyZE9iai50aXRsZSA9IGl0ZW0ubmFtZTtcbiAgICAgIGNhcmRPYmoubGluayA9IGl0ZW0ubGluaztcbiAgICAgIGluaXRpYWxDYXJkcy5wdXNoKGNhcmRPYmopO1xuICAgIH0pXG4gICAgcmV0dXJuIGluaXRpYWxDYXJkcztcbiAgfSlcbi8vICAgY29uc29sZS5sb2coaW5pdGlhbCk7XG4vLyBjb25zb2xlLmxvZyhpbml0aWFsQ2FyZHMpO1xuXG5cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZTogcHJvZmlsZU5hbWUsXG4gIHVzZXJJbmZvOiBwcm9maWxlSW5mb1xufSk7XG5cbmNvbnN0IHN1Ym1pdEVkaXQgPSAoZGF0YUVkaXRGb3JtKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGFFZGl0Rm9ybSk7XG4gIGhhbmRsZUVkaXRGb3JtLmNsb3NlKCk7XG59XG5cbmNvbnN0IGhhbmRsZUVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBFZGl0UHJvZmlsZSwgc3VibWl0RWRpdCk7XG5oYW5kbGVFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5lZGl0QnRuUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbJ2Zvcm0taW5mbyddLnJlc2V0VmFsaWRhdGlvbigpO1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcbiAgaW5mb0lucHV0LnZhbHVlID0gdXNlckRhdGEuaW5mbztcbiAgbmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcbiAgaGFuZGxlRWRpdEZvcm0ub3BlbigpO1xufSk7XG5cbmNvbnN0IHpvb21JbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VQb3B1cCk7XG56b29tSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcbiAgICAgICAgem9vbUltZy5vcGVuKG5hbWUsIGxpbmspO1xuICAgICAgfVxuICAgIH0sICcuaW1nLXRlbXBsYXRlJyk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufTtcblxuY29uc3Qgc3VibWl0QWRkID0gKGRhdGFBZGRGb3JtKSA9PiB7XG4gINGBYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGFBZGRGb3JtKSk7XG4gIGhhbmRsZUFkZENhcmRQb3B1cC5jbG9zZSgpO1xufTtcblxuY29uc3QgaGFuZGxlQWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGRDYXJkLCBzdWJtaXRBZGQpO1xuaGFuZGxlQWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZEJ0bkltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1snZm9ybS1hZGQnXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgaGFuZGxlQWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pXG5cbmNvbnN0INGBYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgINGBYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgfVxufSwgYmxvY2tDYXJkcyk7XG5cbtGBYXJkc0xpc3QucmVuZGVySXRlbXMoaW5pdGlhbCk7IC8vLy8vLy8vLy8vLy8vXG5cbi8vINCS0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAocG9wdXBWYWxpZGF0aW9uKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBvcHVwVmFsaWRhdGlvbi5mb3JtU2VsZWN0b3IpKVxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHBvcHVwVmFsaWRhdGlvbiwgZm9ybUVsZW1lbnQpXG4gICAgLy8g0L/QvtC70YPRh9Cw0LXQvCDQtNCw0L3QvdGL0LUg0LjQtyDQsNGC0YDQuNCx0YPRgtCwIGBuYW1lYCDRgyDRhNC+0YDQvNGLXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKVxuICAgIC8vINCy0L7RgiDRgtGD0YIg0LIg0L7QsdGK0LXQutGCINC30LDQv9C40YHRi9Cy0LDQtdC8INC/0L7QtCDQuNC80LXQvdC10Lwg0YTQvtGA0LzRi1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24ocG9wdXBWYWxpZGF0aW9uKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ2JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc0YWI1NTVlMS0zOWEwLTQ4ZTYtODU5My02ZThhNGE4NGUyOGYnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cbmFwaS5nZXRVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZUluZm8sIHByb2ZpbGVBdmF0YXIpOyIsImV4cG9ydCBjb25zdCBpbml0aWFsID0gW1xuICAgIHtcbiAgICAgIHRpdGxlOiAnVG9zaGkg0LIg0YLQvtC70YHRgtC+0LLQutC1JyxcbiAgICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUzNDQzMjU4NjA0My1lYWQ1Yjk5MjI5ZmI/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE1MDgmcT04MCdcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnVG9zaGkg0LIg0LTQvtC20LTQuNCy0LjQutC1JyxcbiAgICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUzMDA0MTY4NjI1OS01M2QyNmY4NjMzMTM/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTI2MTkmcT04MCdcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnVG9zaGkg0YTRgNCw0L3RhtGD0LcnLFxuICAgICAgbGluazogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE3NTE5MDE0OTIyLThmYzA2YjgxNGEwZT9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTQ3MiZxPTgwJ1xuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdUb3NoaSDQsiDQutC+0YHRgtGO0LzQtSDQotC+0YLQvtGA0L4nLFxuICAgICAgbGluazogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE3NDIzNzM4ODc1LTVjZTMxMGFjZDNkYT9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTU0MCZxPTgwJ1xuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdUb3NoaSDQsiDQtNC20LjQvdGB0L7QstC60LUnLFxuICAgICAgbGluazogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE4MDIwMzgyMTEzLWE3ZThmYzM4ZWFjOT9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTMxNyZxPTgwJ1xuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdUb3NoaSDQvdCwINGB0YLQuNC70LUnLFxuICAgICAgbGluazogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE3NDIzNTY4MzY2LThiODM1MjMwMzRmZD9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTQ3MCZxPTgwJ1xuICAgIH1cbiAgXTtcbiJdLCJuYW1lcyI6WyJBcGkiLCJvcHRpb25zIiwidGhpcyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2siLCJwcm9maWxlTmFtZSIsInByb2ZpbGVJbmZvIiwicHJvZmlsZUF2YXRhciIsInJlc3VsdCIsInRleHRDb250ZW50IiwibmFtZSIsImFib3V0Iiwic3JjIiwiYXZhdGFyIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJfdGl0bGUiLCJ0aXRsZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltZyIsIl9pbWdOYW1lIiwiX2xpa2VCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhbHQiLCJtZXRob2QiLCJhdXRob3JpemF0aW9uIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfZGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbGlja0RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVDbGlja0xpa2VCdXR0b24iLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwIiwiX2VzY0Nsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImFkZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsInBvcHVwU2VsZWN0b3IiLCJzdWJtaXQiLCJfc3VibWl0IiwiX3BvcHVwRm9ybSIsIl9wb3B1cElucHV0IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0RGF0YSIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwiX2lucHV0TGlzdCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlNlY3Rpb24iLCJjb250YWluZXIiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW1zIiwiaXRlbSIsIlBvcHVwV2l0aEltYWdlIiwiX2ltZ0xpbmsiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckluZm8iLCJfdXNlck5hbWUiLCJfdXNlckluZm8iLCJ1c2VyRGF0YSIsImluZm8iLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUNsYXNzTGlzdCIsImZvcm0iLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsIl9mb3JtIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiQXJyYXkiLCJmcm9tIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNvbWUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfaGFzSW52YWxpZElucHV0IiwibWFrZUJ1dHRvbkRpc2FibGVkIiwiZWRpdEJ0blByb2ZpbGUiLCJwb3B1cEVkaXRQcm9maWxlIiwicG9wdXBBZGRDYXJkIiwibmFtZUlucHV0IiwiaW5mb0lucHV0IiwiYWRkQnRuSW1hZ2UiLCJibG9ja0NhcmRzIiwiaW1hZ2VQb3B1cCIsImZvcm1WYWxpZGF0b3JzIiwiaW5pdGlhbENhcmRzIiwiY2FyZE9iaiIsInB1c2giLCJoYW5kbGVFZGl0Rm9ybSIsImRhdGFFZGl0Rm9ybSIsInNldFVzZXJJbmZvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRVc2VySW5mbyIsIm9wZW4iLCJ6b29tSW1nIiwiY3JlYXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImhhbmRsZUFkZENhcmRQb3B1cCIsImRhdGFBZGRGb3JtIiwi0YFhcmRzTGlzdCIsImFkZEl0ZW0iLCJwb3B1cFZhbGlkYXRpb24iLCJyZW5kZXJJdGVtcyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=