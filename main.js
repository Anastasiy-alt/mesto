(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var n,r;return n=t,(r=[{key:"_check",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"GET"}).then((function(t){return e._check(t)}))}},{key:"addInitialCards",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._check(e)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"GET"}).then((function(t){return e._check(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.info})}).then((function(e){return t._check(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._check(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._check(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._check(e)}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.data,o=t.userId,i=t.handleCardClick,u=t.handleDeleteCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardId=r._id,this._cardOwnerId=r.owner._id,this._userId=o,this._title=r.name,this._link=r.link,this._cardSelector=n,this._handleCardClick=i,this._handleDeleteCard=u}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._img=this._element.querySelector(".element__img"),this._imgName=this._element.querySelector(".element__name"),this._likeButton=this._element.querySelector(".element__like"),this._deleteButton=this._element.querySelector(".element__delete"),this._setEventListeners(),this._img.alt=this._title,this._img.src=this._link,this._imgName.textContent=this._title,this._cutDeleteButton(),this._element}},{key:"_cutDeleteButton",value:function(){this._userId!==this._cardOwnerId&&this._deleteButton.remove()}},{key:"_handleClickLikeButton",value:function(){this._likeButton.classList.toggle("element__like_click")}},{key:"handleClickDeleteButton",value:function(){this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._img.addEventListener("click",(function(){e._handleCardClick(e._title,e._link)})),this._deleteButton.addEventListener("click",(function(){e._handleDeleteCard(e._cardId)})),this._likeButton.addEventListener("click",(function(){e._handleClickLikeButton()}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._escClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._escClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._escClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close()}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},c.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submit=t,n._popupForm=n._popup.querySelector(".popup__form"),n._popupInput=n._popupForm.querySelectorAll(".popup__item"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupInput.forEach((function(t){e[t.name]=t.value})),e}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;c(p(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._submit(e._getInputValues())}))}},{key:"close",value:function(){c(p(u.prototype),"close",this).call(this),this._popupForm.reset()}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._imgLink=t._popup.querySelector(".popup__img"),t._imgName=t._popup.querySelector(".popup__info-img"),t}return t=u,(n=[{key:"open",value:function(e,t){this._imgLink.src=t,this._imgLink.alt=e,this._imgName.textContent=e,m(w(u.prototype),"open",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n=t.userName,r=t.userInfo,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userInfo=r,this._userAvatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._userName.textContent,e.info=this._userInfo.textContent,e.avatar=this._userAvatar.src,e}},{key:"getUserId",value:function(){return this._userid}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userInfo.textContent=e.about,this._userAvatar.src=e.avatar,this._userid=e._id}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=I(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function q(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return q(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._yesDeleteButton=t._popup.querySelector(".popup__button_for_delete"),t}return t=u,(n=[{key:"submitDelete",value:function(e){this._submitDelete=e}},{key:"setEventListeners",value:function(){var e=this;P(B(u.prototype),"setEventListeners",this).call(this),this._yesDeleteButton.addEventListener("click",(function(t){t.preventDefault(),e._submitDelete()}))}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"_showError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._form.inputErrorClass),n.textContent=t,n.classList.add(r._form.errorClass)})),T(this,"_hideError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._form.inputErrorClass),t.classList.remove(r._form.errorClass),t.textContent=" "})),T(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideError(e):r._showError(e,e.validationMessage)})),this._form=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(".popup__item")),this._buttonElement=this._formElement.querySelector(this._form.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"makeButtonDisabled",value:function(){this._buttonElement.classList.add(this._form.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?this.makeButtonDisabled():(this._buttonElement.classList.remove(this._form.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideError(t)}))}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),A=document.querySelector(".profile__edit-button"),x=document.querySelector(".popup_for_edit"),N=document.querySelector(".popup_for_add"),V=document.querySelector("[name=name]"),F=document.querySelector("[name=info]"),J=document.querySelector(".profile__name"),G=document.querySelector(".profile__info"),H=document.querySelector(".profile__add-button"),M=document.querySelector(".elements"),z=document.querySelector(".popup_for_img"),$=document.querySelector(".profile__avatar"),K={};function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=document.querySelector(".popup_for_delete"),X=document.querySelector(".popup_for_avatar"),Y=document.querySelector(".profile__cover-hover"),Z=document.querySelector(".popup__item_input_link-avatar");Y.addEventListener("click",(function(){K["form-avatar"].resetValidation();var e=ne.getUserInfo();Z.value=e.avatar,oe.open()}));var ee=new t({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-46",headers:{authorization:"4ab555e1-39a0-48e6-8593-6e8a4a84e28f","Content-Type":"application/json"}}),te=new y({renderer:function(e){te.addItem(ce(e))}},M),ne=new S({userName:J,userInfo:G,userAvatar:$});Promise.all([ee.getUserInfo(),ee.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ne.setUserInfo(o),te.renderItems(i)})).catch((function(e){console.log("Ошибка: ".concat(e))}));var re=new h(x,(function(e){ee.setUserInfo(e).then((function(e){ne.setUserInfo(e),re.close()})).catch((function(e){console.log(e)}))}));re.setEventListeners();var oe=new h(X,(function(e){ee.setUserAvatar(e).then((function(e){console.log(e),ne.setUserInfo(e),oe.close()})).catch((function(e){console.log(e)}))}));oe.setEventListeners(),A.addEventListener("click",(function(){K["form-info"].resetValidation();var e=ne.getUserInfo();F.value=e.info,V.value=e.name,re.open()}));var ie=new E(z);ie.setEventListeners();var ue=new R(W);ue.setEventListeners();var ae,ce=function(e){var t=new r({data:e,userId:ne.getUserId(),handleCardClick:function(e,t){ie.open(e,t)},handleDeleteCard:function(e){ue.open(),ue.submitDelete((function(){ee.deleteCard(e).then((function(){ue.close(),t.handleClickDeleteButton()})).catch((function(e){console.log(e)}))}))}},".img-template");return t.generateCard()},se=new h(N,(function(e){ee.addInitialCards(e).then((function(e){te.addItem(ce(e)),se.close()})).catch((function(e){console.log(e)}))}));se.setEventListeners(),H.addEventListener("click",(function(){K["form-add"].resetValidation(),se.open()})),ae={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(ae.formSelector)).forEach((function(e){var t=new U(ae,e),n=e.getAttribute("name");K[n]=t,t.enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDTixJQUNBaEIsT0FBTSxTQUFDTSxHQUNOSixRQUFRQyxJQUFJRyxFQUNiLEdBQ0YsR0FDRixHQUNBLGlCQUVMLE9BRG9CTSxFQUFLSyxjQUUxQixFQWFLQyxHQUFxQixJQUFJaEgsRUFBY21FLEdBWDNCLFNBQUM4QyxHQUNqQjdCLEdBQUk4QixnQkFBZ0JELEdBQ25CL0ssTUFBSyxTQUFDK0ssR0FDUDNCLEdBQVVDLFFBQVFDLEdBQVd5QixJQUM3QkQsR0FBbUJuSCxPQUNsQixJQUNBaUcsT0FBTSxTQUFDTSxHQUNOSixRQUFRQyxJQUFJRyxFQUNiLEdBQ0YsSUFHRFksR0FBbUJYLG9CQUVuQjdCLEVBQVl2RixpQkFBaUIsU0FBUyxXQUNwQzJGLEVBQWUsWUFBZkEsa0JBQ0FvQyxHQUFtQjdCLE1BQ3BCLElBR3lCc0IsR0R0SUssQ0FDN0JVLGFBQWMsZUFDZEMsY0FBZSxnQkFDZjNELHFCQUFzQixpQkFDdEJJLG9CQUFxQiw4QkFDckJkLGdCQUFpQiwwQkFDakJDLFdBQVksNkJDaUlLTSxNQUFNQyxLQUFLeEYsU0FBU3VDLGlCQUFpQm1HLEdBQWdCVSxlQUM3RDNHLFNBQVEsU0FBQzZHLEdBQ2hCLElBQU1DLEVBQVksSUFBSWhGLEVBQWNtRSxHQUFpQlksR0FFL0NFLEVBQVdGLEVBQVlHLGFBQWEsUUFFMUM1QyxFQUFlMkMsR0FBWUQsRUFDM0JBLEVBQVVHLGtCQUNYLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwRGVsZXRlQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICAgIH1cbiAgICBfY2hlY2socmVzKSB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVjayhyZXMpKVxuICAgIH1cblxuICAgIGFkZEluaXRpYWxDYXJkcyhjYXJkRGF0YSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2socmVzKSlcblxuICAgIH1cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVjayhyZXMpKVxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBhYm91dDogdXNlckRhdGEuaW5mb1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVjayhyZXMpKVxuICAgIH1cblxuICAgIGFkZENhcmQoY2FyZERhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGNhcmREYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgbGluazogY2FyZERhdGEubGlua1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVjayhyZXMpKTtcbiAgICB9XG5cbiAgICBzZXRVc2VyQXZhdGFyICh1c2VyRGF0YSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhclxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVjayhyZXMpKVxuICAgIH1cblxuICAgIGRlbGV0ZUNhcmQgKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVjayhyZXMpKVxuICAgIH1cblxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2FyZCB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9jYXJkT3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2ltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltZycpO1xuICAgIHRoaXMuX2ltZ05hbWUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19uYW1lJyk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUnKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2ltZy5hbHQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLl9pbWcuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9pbWdOYW1lLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fY3V0RGVsZXRlQnV0dG9uKCk7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfY3V0RGVsZXRlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX2NhcmRPd25lcklkKSB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG4gIFxuXG4gIF9oYW5kbGVDbGlja0xpa2VCdXR0b24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlX2NsaWNrJyk7XG4gIH1cblxuICBoYW5kbGVDbGlja0RlbGV0ZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2ltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl90aXRsZSwgdGhpcy5fbGluaylcbiAgICB9KTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG50aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2NhcmRJZClcbiAgICB9KTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2xpY2tMaWtlQnV0dG9uKCk7XG4gICAgfSk7XG4gIH07XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgICAgICB0aGlzLl9wb3B1cCA9IHBvcHVwO1xuICAgICAgICB0aGlzLl9lc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9lc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXQpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3N1Ym1pdCA9IHN1Ym1pdDtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgICAgIHRoaXMuX3BvcHVwSW5wdXQgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pdGVtJyk7XG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dERhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbnB1dC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgIGlucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlucHV0RGF0YTtcbiAgICB9XG5cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIC8vINGC0YPRgiDQstGB0YLQsNCy0LvRj9C10Lwg0LIgYHZhbHVlYCDQuNC90L/Rg9GC0LAg0LTQsNC90L3Ri9C1INC40Lcg0L7QsdGK0LXQutGC0LAg0L/QviDQsNGC0YDQuNCx0YPRgtGDIGBuYW1lYCDRjdGC0L7Qs9C+INC40L3Qv9GD0YLQsFxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7cmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XG4gICAgICAgIC8vIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2ltZ0xpbmsgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZycpO1xuICAgICAgICB0aGlzLl9pbWdOYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbmZvLWltZycpO1xuICAgIH1cblxuICAgIG9wZW4obmFtZSwgbGluaykge1xuICAgICAgICB0aGlzLl9pbWdMaW5rLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX2ltZ0xpbmsuYWx0ID0gbmFtZTtcbiAgICAgICAgdGhpcy5faW1nTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJJbmZvLCB1c2VyQXZhdGFyIH0pIHtcbiAgICAgICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB1c2VySW5mbztcbiAgICAgICAgdGhpcy5fdXNlckF2YXRhciA9IHVzZXJBdmF0YXI7XG5cbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSB7fTtcbiAgICAgICAgdXNlckRhdGFbJ25hbWUnXSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xuICAgICAgICB1c2VyRGF0YVsnaW5mbyddID0gdGhpcy5fdXNlckluZm8udGV4dENvbnRlbnQ7XG4gICAgICAgIHVzZXJEYXRhWydhdmF0YXInXSA9IHRoaXMuX3VzZXJBdmF0YXIuc3JjO1xuICAgICAgICAvLyB1c2VyRGF0YVsnX2lkJ10gPSB0aGlzLl91c2VyaWQ7XG4gICAgICAgIHJldHVybiB1c2VyRGF0YTtcbiAgICB9XG5cbiAgICBnZXRVc2VySWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyaWQ7XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8odXNlckRhdGEpIHtcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgICAgICB0aGlzLl91c2VySW5mby50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xuICAgICAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcbiAgICAgICAgdGhpcy5fdXNlcmlkID0gdXNlckRhdGEuX2lkO1xuICAgIH1cblxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cERlbGV0ZUNhcmQgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IgKHBvcHVwKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwKTtcbiAgICAgICAgdGhpcy5feWVzRGVsZXRlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b25fZm9yX2RlbGV0ZScpO1xuICAgIH1cblxuICAgIHN1Ym1pdERlbGV0ZSAoZXZ0KSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdERlbGV0ZSA9IGV2dDtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5feWVzRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMuX3N1Ym1pdERlbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihmb3JtQ2xhc3NMaXN0LCBmb3JtKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtQ2xhc3NMaXN0O1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm07XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pdGVtJykpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB9O1xuXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC00L7QsdCw0LLQu9GP0LXRgiDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5XG4gICAgX3Nob3dFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Zvcm0uaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3JtLmVycm9yQ2xhc3MpO1xuICAgIH07XG5cbiAgICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0YPQtNCw0LvRj9C10YIg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuVxuICAgIF9oaWRlRXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybS5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtLmVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgICB9O1xuXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC/0YDQvtCy0LXRgNGP0LXRgiDQstCw0LvQuNC00L3QvtGB0YLRjCDQv9C+0LvRj1xuICAgIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgIH07XG5cbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvL9GE0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQtNC10LvQsNC10YIg0LrQvdC+0L/QutGDINC90LXQsNC60YLQuNCy0L3QvtC5IFxuICAgIG1ha2VCdXR0b25EaXNhYmxlZCgpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Zvcm0uaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlXG4gICAgfTtcblxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFrZUJ1dHRvbkRpc2FibGVkKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3JtLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59IiwiZXhwb3J0IGNvbnN0IGVkaXRCdG5Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9mb3JfZWRpdCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9mb3JfYWRkJyk7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9bmFtZV0nKTtcbmV4cG9ydCBjb25zdCBpbmZvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1pbmZvXScpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbmZvJyk7XG5leHBvcnQgY29uc3QgYWRkQnRuSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGJsb2NrQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKTtcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2Zvcl9pbWcnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xuXG5leHBvcnQgY29uc3QgcG9wdXBWYWxpZGF0aW9uID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl90eXBlX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZSdcbn07XG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTsiLCJpbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBQb3B1cERlbGV0ZUNhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cERlbGV0ZUNhcmQuanMnO1xuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHtcbiAgZWRpdEJ0blByb2ZpbGUsIHBvcHVwRWRpdFByb2ZpbGUsIHBvcHVwQWRkQ2FyZCwgbmFtZUlucHV0LFxuICBpbmZvSW5wdXQsIHByb2ZpbGVOYW1lLCBwcm9maWxlSW5mbywgYWRkQnRuSW1hZ2UsXG4gIGJsb2NrQ2FyZHMsIGltYWdlUG9wdXAsIHBvcHVwVmFsaWRhdGlvbixcbiAgZm9ybVZhbGlkYXRvcnMsIHByb2ZpbGVBdmF0YXJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZm9yX2RlbGV0ZScpO1xuY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2Zvcl9hdmF0YXInKTtcbmNvbnN0IGVkaXRBdmF0YXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fY292ZXItaG92ZXInKTtcbmNvbnN0IGF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX2lucHV0X2xpbmstYXZhdGFyJyk7XG5cbmVkaXRBdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzWydmb3JtLWF2YXRhciddLnJlc2V0VmFsaWRhdGlvbigpO1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcbiAgYXZhdGFySW5wdXQudmFsdWUgPSB1c2VyRGF0YS5hdmF0YXI7XG4gIGhhbmRsZUVkaXRBdmF0YXIub3BlbigpO1xufSlcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ2JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc0YWI1NTVlMS0zOWEwLTQ4ZTYtODU5My02ZThhNGE4NGUyOGYnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cbmNvbnN0INGBYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgINGBYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgfVxufSwgYmxvY2tDYXJkcyk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IHByb2ZpbGVOYW1lLFxuICB1c2VySW5mbzogcHJvZmlsZUluZm8sXG4gIHVzZXJBdmF0YXI6IHByb2ZpbGVBdmF0YXJcbn0pO1xuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXG4gIC50aGVuKChbdXNlckRhdGEsIGluaXRpYWxDYXJkc10pID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAg0YFhcmRzTGlzdC5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJvcn1gKTtcbiAgfSk7XG5cbmNvbnN0IHN1Ym1pdEVkaXQgPSAoZGF0YUVkaXRGb3JtKSA9PiB7IC8vZWRpdFxuICBhcGkuc2V0VXNlckluZm8oZGF0YUVkaXRGb3JtKVxuICAgIC50aGVuKChkYXRhRWRpdEZvcm0pID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGFFZGl0Rm9ybSk7XG4gICAgICBoYW5kbGVFZGl0Rm9ybS5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgIH0pO1xufVxuXG5jb25zdCBzdWJtaXRBdmF0YXIgPSAoZGF0YUF2YXRhckZvcm0pID0+IHsgLy9hdmF0YXJcbiAgYXBpLnNldFVzZXJBdmF0YXIoZGF0YUF2YXRhckZvcm0pXG4gICAgLnRoZW4oKGRhdGFBdmF0YXJGb3JtKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhQXZhdGFyRm9ybSlcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGFBdmF0YXJGb3JtKTtcbiAgICAgIGhhbmRsZUVkaXRBdmF0YXIuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgICB9KTtcbn1cblxuY29uc3QgaGFuZGxlRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRQcm9maWxlLCBzdWJtaXRFZGl0KTsgLy9lZGl0Zm9ybVxuaGFuZGxlRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgaGFuZGxlRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWRpdEF2YXRhciwgc3VibWl0QXZhdGFyKTsgLy9hdmF0YXJcbmhhbmRsZUVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZWRpdEJ0blByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzWydmb3JtLWluZm8nXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpXG4gIGluZm9JbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmluZm87XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XG4gIGhhbmRsZUVkaXRGb3JtLm9wZW4oKTtcbn0pO1xuXG5jb25zdCB6b29tSW1nID0gbmV3IFBvcHVwV2l0aEltYWdlKGltYWdlUG9wdXApO1xuem9vbUltZy5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBoYW5kbGVEZWxldGVDYXJkID0gbmV3IFBvcHVwRGVsZXRlQ2FyZCAocG9wdXBEZWxldGVDYXJkKTtcbmhhbmRsZURlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBkYXRhOiBkYXRhLFxuICAgICAgdXNlcklkOiB1c2VySW5mby5nZXRVc2VySWQoKSxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcbiAgICAgICAgem9vbUltZy5vcGVuKG5hbWUsIGxpbmspO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZURlbGV0ZUNhcmQ6IChjYXJkSWQpID0+IHtcbiAgICAgICAgaGFuZGxlRGVsZXRlQ2FyZC5vcGVuKCk7XG4gICAgICAgIGhhbmRsZURlbGV0ZUNhcmQuc3VibWl0RGVsZXRlKCgpID0+IHtcbiAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaGFuZGxlRGVsZXRlQ2FyZC5jbG9zZSgpO1xuICAgICAgICAgICAgY2FyZC5oYW5kbGVDbGlja0RlbGV0ZUJ1dHRvbigpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sICcuaW1nLXRlbXBsYXRlJyk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufTtcblxuY29uc3Qgc3VibWl0QWRkID0gKGRhdGFBZGRGb3JtKSA9PiB7XG4gIGFwaS5hZGRJbml0aWFsQ2FyZHMoZGF0YUFkZEZvcm0pXG4gIC50aGVuKChkYXRhQWRkRm9ybSkgPT4ge1xuICDRgWFyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhQWRkRm9ybSkpO1xuICBoYW5kbGVBZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgfSk7XG59O1xuXG5jb25zdCBoYW5kbGVBZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZENhcmQsIHN1Ym1pdEFkZCk7XG5oYW5kbGVBZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYWRkQnRuSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzWydmb3JtLWFkZCddLnJlc2V0VmFsaWRhdGlvbigpO1xuICBoYW5kbGVBZGRDYXJkUG9wdXAub3BlbigpO1xufSlcblxuLy8g0JLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuFxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChwb3B1cFZhbGlkYXRpb24pID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocG9wdXBWYWxpZGF0aW9uLmZvcm1TZWxlY3RvcikpXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IocG9wdXBWYWxpZGF0aW9uLCBmb3JtRWxlbWVudClcbiAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDQvdC90YvQtSDQuNC3INCw0YLRgNC40LHRg9GC0LAgYG5hbWVgINGDINGE0L7RgNC80YtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpXG4gICAgLy8g0LLQvtGCINGC0YPRgiDQsiDQvtCx0YrQtdC60YIg0LfQsNC/0LjRgdGL0LLQsNC10Lwg0L/QvtC0INC40LzQtdC90LXQvCDRhNC+0YDQvNGLXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihwb3B1cFZhbGlkYXRpb24pOyJdLCJuYW1lcyI6WyJBcGkiLCJvcHRpb25zIiwidGhpcyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfY2hlY2siLCJjYXJkRGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImxpbmsiLCJ1c2VyRGF0YSIsImFib3V0IiwiaW5mbyIsImF2YXRhciIsImNhcmRJZCIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSWQiLCJfaWQiLCJfY2FyZE93bmVySWQiLCJvd25lciIsIl91c2VySWQiLCJfdGl0bGUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfaW1nIiwiX2ltZ05hbWUiLCJfbGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhbHQiLCJzcmMiLCJ0ZXh0Q29udGVudCIsIl9jdXREZWxldGVCdXR0b24iLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUNsaWNrTGlrZUJ1dHRvbiIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfZXNjQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXBTZWxlY3RvciIsInN1Ym1pdCIsIl9zdWJtaXQiLCJfcG9wdXBGb3JtIiwiX3BvcHVwSW5wdXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXREYXRhIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJfaW5wdXRMaXN0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaXRlbXMiLCJpdGVtIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1nTGluayIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySW5mbyIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckluZm8iLCJfdXNlckF2YXRhciIsIl91c2VyaWQiLCJQb3B1cERlbGV0ZUNhcmQiLCJfeWVzRGVsZXRlQnV0dG9uIiwiX3N1Ym1pdERlbGV0ZSIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtQ2xhc3NMaXN0IiwiZm9ybSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImlkIiwiX2Zvcm0iLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJBcnJheSIsImZyb20iLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5Iiwic29tZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJtYWtlQnV0dG9uRGlzYWJsZWQiLCJlZGl0QnRuUHJvZmlsZSIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cEFkZENhcmQiLCJuYW1lSW5wdXQiLCJpbmZvSW5wdXQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVJbmZvIiwiYWRkQnRuSW1hZ2UiLCJibG9ja0NhcmRzIiwiaW1hZ2VQb3B1cCIsInByb2ZpbGVBdmF0YXIiLCJmb3JtVmFsaWRhdG9ycyIsInBvcHVwRGVsZXRlQ2FyZCIsInBvcHVwRWRpdEF2YXRhciIsImVkaXRBdmF0YXJCdG4iLCJhdmF0YXJJbnB1dCIsImdldFVzZXJJbmZvIiwiaGFuZGxlRWRpdEF2YXRhciIsIm9wZW4iLCJhcGkiLCJhdXRob3JpemF0aW9uIiwi0YFhcmRzTGlzdCIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiaW5pdGlhbENhcmRzIiwic2V0VXNlckluZm8iLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlRWRpdEZvcm0iLCJkYXRhRWRpdEZvcm0iLCJlcnIiLCJzZXRFdmVudExpc3RlbmVycyIsImRhdGFBdmF0YXJGb3JtIiwic2V0VXNlckF2YXRhciIsInpvb21JbWciLCJwb3B1cFZhbGlkYXRpb24iLCJjYXJkIiwiZ2V0VXNlcklkIiwic3VibWl0RGVsZXRlIiwiZGVsZXRlQ2FyZCIsImhhbmRsZUNsaWNrRGVsZXRlQnV0dG9uIiwiZ2VuZXJhdGVDYXJkIiwiaGFuZGxlQWRkQ2FyZFBvcHVwIiwiZGF0YUFkZEZvcm0iLCJhZGRJbml0aWFsQ2FyZHMiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9